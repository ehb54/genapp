var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var g=c++;return{value:b(g,a[g]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var g=a[e];g in c||(c[g]={});c=c[g]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var e="";a;)if(a&1&&(e+=b),a>>>=1)b+=b;return e}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,g=0;g<e;g++){var f=a[g];if(b.call(c,f,g,a))return{i:g,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};$jscomp.polyfill("String.prototype.padEnd",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,null,"padStart");return b+$jscomp.stringPadding(c,a-b.length)}},"es8","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");var ga={tmp:{},multistage:{},stages:{},stagesdefault:{},currentstage:0,fielderrors:{},customtooltips:{},showcollapse3d:{},plotted3d:{},showcollapse2d:{},plotted2d:{}};
(function(a,b){a.jstree.defaults.conditionalselect=function(){return!0};a.jstree.plugins.conditionalselect=function(a,b){this.activate_node=function(a,c){this.settings.conditionalselect.call(this,this.get_node(a))&&b.activate_node.call(this,a,c)}};a.jstree.plugins.singleselect=function(a,b){this.activate_node=function(a,c){this.is_leaf(a)&&b.activate_node.call(this,a,c)}};a.jstree.plugins.selectonlyleaf=function(a,b){this.activate_node=function(a,c){this.is_leaf(a)&&b.activate_node.call(this,a,c)}};
a.jstree.plugins.singleselectpath=function(a,b){this.activate_node=function(a,c){this.is_leaf(a)||b.activate_node.call(this,a,c)}};a.jstree.plugins.selectnoleaf=function(a,b){this.activate_node=function(a,c){this.is_leaf(a)||b.activate_node.call(this,a,c)}};a.jstree.defaults.sort=function(a,b){return this.get_node(a).data.time<this.get_node(b).data.time?1:-1}})(jQuery);RegExp.quote=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};
Object.size=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};ga.set=function(a,b){b&&(ga.set.data[a]=b);return ga.set.data[a]};ga.set.data={};ga.restricted={};ga.restricted.add=function(a,b){ga.restricted.ids[a]=ga.restricted.ids[a]||[];ga.restricted.ids[a].push(b)};ga.restricted.hideall=function(){var a;ga.restricted.data={};for(a in ga.restricted.ids)$(ga.restricted.ids[a].join()).hide()};
ga.restricted.show=function(a){for(var b in a)ga.restricted.data[a[b]]=1,ga.restricted.ids[a[b]]&&$(ga.restricted.ids[a[b]].join()).show()};ga.specproj=function(a,b){var c={};c.id=a;c.value=b;ga.specproj.data.push(c)};ga.specproj.data=[];ga.specproj.clear=function(){ga.specproj.data=[]};
ga.specproj.gname=function(){var a,b="";for(a in ga.specproj.data)if(ga.specproj.data.hasOwnProperty(a)){var c=$(ga.specproj.data[a].value).val();c==parseFloat(c)&&(c=parseFloat(c));c=ga.specproj.data[a].id+c;b+=c.replace(/[^A-z0-9.-]+/g,"_")}return b};ga.urlparams=function(a){for(var b=window.location.search.substring(1).split("&"),c=0;c<b.length;c++){var e=b[c].split("=");if(e[0]==a)return e[1]}};ga.frontpage=function(a){$("html").load(a)};
ga.loader=function(a,b){ga.loader.jqtag=a;ga.loader.delay=b};ga.loader.timeout=null;ga.loader.startshow=function(){ga.loader.timeout?(clearTimeout(ga.loader.timeout),ga.loader.timeout=null,$(ga.loader.jqtag).show()):$(ga.loader.jqtag).hide()};ga.loader.hide=function(){ga.loader.timeout&&(clearTimeout(ga.loader.timeout),ga.loader.timeout=null);$(ga.loader.jqtag).hide()};ga.loader.show=function(){ga.loader.timeout&&clearTimeout(ga.loader.timeout);ga.loader.timeout=setTimeout(ga.loader.startshow(),ga.loader.delay)};
ga.menumodules=[];ga.group={};ga.group.set=function(a){ga.group.all=a};ga.group.setuser=function(a){var b;ga.group.user=a;ga.group.userhas={};for(b in ga.group.user)ga.group.userhas[ga.group.user[b]]=1;ga.group.show()};
ga.group.inputhtml=function(a){var b="",c;ga.group.activeids={};if(!ga.group.all)return b;for(c in ga.group.all)if(ga.group.all[c].userconfig){var e="_setgroup_"+a+"_"+c;b+='<tr><td><label for="'+e+'" class="highlight">'+(ga.group.all[c].label?ga.group.all[c].label:c)+'</label></td><td><input type="checkbox" name="'+e+'" id="'+e+'"'+(ga.group.userhas[c]?" checked":"")+(ga.group.all[c].help?' class="help_link"><span class="help">'+ga.group.all[c].help+"</span":"")+"></td></tr>";ga.group.activeids[c]=
e}return b};ga.group.addmenu=function(a,b){ga.group.menuids[a]=ga.group.menuids[a]||[];ga.group.menuids[a].push(b)};ga.group.hideall=function(){for(var a in ga.group.menuids)$(ga.group.menuids[a].join()).hide()};ga.group.show=function(){var a;ga.group.hideall();for(a in ga.group.userhas)ga.group.menuids[a]&&$(ga.group.menuids[a].join()).show();ga.group.menuids.login&&$(ga.group.menuids.login.join()).show()};
ga.browser=function(){var a=navigator.userAgent;ga.browser.type="unknown";ga.browser.prefix="";ga.browser.gradient=!1;ga.browser.clrpkr=!1;-1<a.indexOf("Chrome")?(ga.browser.type="chrome",ga.browser.prefix="-webkit-",ga.browser.gradient=!0,ga.browser.clrpkr=!0):-1<a.indexOf("Safari")?(ga.browser.type="safari",ga.browser.prefix="-webkit-",ga.browser.gradient=!0):-1<a.indexOf("Opera")?(ga.browser.type="opera",ga.browser.prefix="-o-",ga.browser.gradient=!0,ga.browser.clrpkr=!0):-1<a.indexOf("Firefox")?
(ga.browser.type="mozilla",ga.browser.prefix="-moz-",ga.browser.gradient=!0,ga.browser.clrpkr=!0):-1<a.indexOf("MSIE")&&(ga.browser.type="msie",ga.browser.prefix="",ga.browser.gradient=!0)};ga.cssrule={};
ga.cssrule.get=function(a,b){a=a.toLowerCase();if(document.styleSheets)for(var c=0;c<document.styleSheets.length;c++){var e=document.styleSheets[c],g=0,f;do{if((f=e.cssRules?e.cssRules[g]:e.rules[g])&&f.selectorText&&f.selectorText.toLowerCase()==a)return"delete"==b?(e.cssRules?e.deleteRule(g):e.removeRule(g),!0):f;g++}while(f)}return!1};ga.cssrule.kill=function(a){return ga.cssrule.get(a,"delete")};
ga.cssrule.add=function(a){document.styleSheets&&(ga.cssrule.get(a)||(document.styleSheets[0].addRule?document.styleSheets[0].addRule(a,null,0):document.styleSheets[0].insertRule(a+" { }",0)));return ga.cssrule.get(a)};ga.cache={};
ga.cache.msg=function(a,b,c,e,g,f,k){switch(a){case "notify":if(ga.restricted.data[b]){ga.msg.box({icon:"question.png",text:"Show or clear previously computed results.",buttons:[{id:"showcached",label:"Show previously computed results",cb:c,adata:[g,0,1,1]},{id:"clear",label:"Clear cached result",cb:ga.cache.clear,adata:[g,b]},{id:"cancel",label:"Cancel"}]});return}ga.msg.box({icon:"information.png",text:"Showing previously computed results."});break;case "askrecompute":ga.restricted.data[b]?ga.msg.box({icon:"question.png",
text:"Previously computed results are available.",buttons:[{id:"showcached",label:"Show previously computed results",cb:c,adata:[g,0,1,1]},{id:"recompute",label:"Recompute results",cb:e,adata:[f,k,1]},{id:"clear",label:"Clear cached result",cb:ga.cache.clear,adata:[g,b]},{id:"cancel",label:"Cancel"}]}):ga.msg.box({icon:"question.png",text:"Previously computed results are available.",buttons:[{id:"showcached",label:"Show previously computed results",cb:c,adata:[g,0,1,1]},{id:"recompute",label:"Recompute results",
cb:e,adata:[f,k,1]},{id:"cancel",label:"Cancel"}]});return;default:if(ga.restricted.data[b]){ga.msg.box({icon:"question.png",text:"Show or clear previously computed results.",buttons:[{id:"showcached",label:"Show previously computed results",cb:c,adata:[g,0,1,1]},{id:"clear",label:"Clear cached result",cb:ga.cache.clear,adata:[g,b]},{id:"cancel",label:"Cancel"}]});return}}c(g,0,1,1)};
ga.cache.clear=function(a,b){ga.msg.box({icon:"admin.png",text:"Are you sure you want to permanently remove this previously computed result?",buttons:[{id:"clear",label:"Clear cached result",cb:ga.cache.doclear,adata:[a,b]},{id:"cancel",label:"Cancel"}]})};
ga.cache.doclear=function(a,b){ga.cache.url_clear?$.getJSON(ga.cache.url_clear,{tagmode:"any",format:"json",_window:window.name,_logon:$("#_state").data("_logon"),_uuid:a,_cachedelete:b}).done(function(a,b,g){"true"==a.success?ga.msg.box({icon:"information.png",text:"Previously computed results cleared"}):ga.msg.box({icon:"toast.png",text:a.error})}).fail(function(a,b,g){console.warn("could not clear cache data");ga.msg.box({icon:"toast.png",text:"Error: server failed to clear cached entry"})}):ga.msg.box({icon:"toast.png",
text:"Internal error: no url defined for cache clear"})};ga.trytilltrue=function(a,b,c,e){if(eval(a))return eval(b);c--;if(0>c)console.warn("ga.trytilltrue failed ... to many tries");else return setTimeout(ga.trytilltrue,e,a,b,c,e)};ga.login={};
ga.login.verify=function(a){var b={text:a.text||"You must verify your email address."};a.useroptions&&(a.useroptions.resend&&(b.buttons=b.buttons||[],b.buttons.push({id:"resend",label:"Resend the verification email",cb:ga.login.verify.resend})),a.useroptions.resend&&(b.buttons=b.buttons||[],b.buttons.push({id:"changeaddress",label:"Change your email address and resend the verification",cb:ga.login.verify.change})),a.useroptions.cancel&&(b.buttons=b.buttons||[],b.buttons.push({id:"cancelregistration",
label:"Cancel your registration",cb:ga.login.verify.cancel})));ga.msg.box(b)};ga.login.verify.resend=function(){var a=$("#sys_login");if(!a)return ga.msg.box({icon:"toast.png",text:"Internal error: form missing"});a.append('<input type="hidden" name="_resendverify" class="toclear">');do_sys_login_submit(a)};
ga.login.verify.change=function(){return ga.msg.box({icon:"question.png",text:'<center><label  class="header3 ">Change email address</label></center><form id="_changeemail"><table><tr><td><label for="_changeemail1">Email address </label></td><td><input type="email" name="_changeemail1" id="_changeemail1" required size="50" class="help_link"><span class="help">Enter a valid email address.  This will be required if you forget your password.  Otherwise, you will have to create a new account lose access to your projects</span><span id="_changeemail1_msg" class="warning field_msg" > </span></td></tr><tr><td><label for="_changeemail2">Repeat email address </label></td><td><input type="email" name="_changeemail2" id="_changeemail2" required size="50" class="help_link"><span class="help">Enter a valid email address.  This will be required if you forget your password.  Otherwise, you will have to create a new account lose access to your projects</span><span id="_changeemail2_msg" class="warning field_msg" > </span></td></tr></table></form><script>$( "#_changeemail1" ).keypress( function() { $( "#_changeemail1_msg" ).empty();});$( "#_changeemail2" ).keypress( function() { $( "#_changeemail2_msg" ).empty();});$( "#_changeemail2" ).blur( function() { ga.valid.checkMatch( "#_changeemail2", "#_changeemail1" ); } );ga.hhelp.set();\x3c/script>',buttons:[{id:"_changeemailbutton",
label:"Submit",cb:ga.login.verify.change.doit},{id:"_changeemailcancel",label:"Cancel"}]})};
ga.login.verify.change.doit=function(){var a=$("#sys_login");if(!a)return ga.msg.box({icon:"toast.png",text:"Internal error: form missing"});a.append('<input type="hidden" name="_resendverify" class="toclear">');a.append('<input type="hidden" name="_changeemail" class="toclear">');a.append('<input type="hidden" name="_changeemail1" value="'+$("#_changeemail1").val()+'" class="toclear">');a.append('<input type="hidden" name="_changeemail2" value="'+$("#_changeemail2").val()+'" class="toclear">');do_sys_login_submit(a)};
ga.login.verify.cancel=function(){var a=$("#sys_login");if(!a)return ga.msg.box({icon:"toast.png",text:"Internal error: form missing"});a.append('<input type="hidden" name="_cancel" class="toclear">');do_sys_login_submit(a)};
ga.login.approve=function(a){var b={text:a.text||"Your registration is pending approval."};a.useroptions&&(a.useroptions.resend&&(b.buttons=b.buttons||[],b.buttons.push({id:"resend",label:"Resend the approval request",cb:ga.login.approve.resend})),a.useroptions.cancel&&(b.buttons=b.buttons||[],b.buttons.push({id:"cancelregistration",label:"Cancel your registration request",cb:ga.login.approve.cancel})));ga.msg.box(b)};
ga.login.approve.resend=function(){var a=$("#sys_login");if(!a)return ga.msg.box({icon:"toast.png",text:"Internal error: form missing"});a.append('<input type="hidden" name="_resendapprove" class="toclear">');do_sys_login_submit(a)};ga.login.approve.cancel=function(){var a=$("#sys_login");if(!a)return ga.msg.box({icon:"toast.png",text:"Internal error: form missing"});a.append('<input type="hidden" name="_cancel" class="toclear">');do_sys_login_submit(a)};ga.admin={};
ga.admin.ajax=function(a,b,c,e,g){$.get(ga.admin.ajax.url,{tagmode:"any",format:"json",_window:window.name,_logon:$("#_state").data("_logon"),_cmd:a,_name:b,_id:c,_manageid:e,_jid:g}).done(function(a,b,c){a=JSON.parse(a.replace(/^\s*[\r\n]/gm,"").split(/\r?\n/)[1]);"true"!=a.success&&ga.msg.box({icon:"toast.png",text:a.error?a.error:"unknown error"});a._submitid&&$("#"+a._submitid).trigger("click")}).fail(function(a,b,c){ga.msg.box({icon:"toast.png",text:"Error: system user management backend command failed to run: "+
c})})};ga.admin.ajax.remove=function(a,b,c,e){ga.msg.box({icon:"admin.png",text:"Are you sure you want to permanently remove this user, all of their job history and their stored data?",buttons:[{id:"yes",label:"Yes, remove this user",cb:ga.admin.ajax,adata:[a,b,c,e]},{id:"cancel",label:"Cancel"}]})};
ga.admin.ajax.group=function(a,b,c,e,g){ga.msg.box({icon:"admin.png",text:"Enter the group for user "+b+'<form id="sys_musergrp"><input id="sys_musergrp_text" class="help_link" type="text" size="25" value="'+g+'"><span class="help">Enter a group for this user, then press ok or cancel</span></form>',eval:"ga.hhelp.reset();$('#sys_musergrp').on('keyup keypress', function(e) { var code = e.keyCode || e.which;  if (code  == 13) { e.preventDefault(); return false; }});",buttons:[{id:"ok",label:"Ok",cb:ga.admin.ajax.group.cb,
adata:[a,b,c,e]},{id:"cancel",label:"Cancel"}]})};
ga.admin.ajax.group.cb=function(a,b,c,e,g){$.get(ga.admin.ajax.url,{tagmode:"any",format:"json",_window:window.name,_logon:$("#_state").data("_logon"),_cmd:a,_name:b,_id:c,_manageid:e,_group:$("#sys_musergrp_text").val()}).done(function(a,b,c){a=JSON.parse(a.replace(/^\s*[\r\n]/gm,"").split(/\r?\n/)[1]);"true"!=a.success&&ga.msg.box({icon:"toast.png",text:a.error?a.error:"unknown error"});a._submitid&&$("#"+a._submitid).trigger("click")}).fail(function(a,b,c){ga.msg.box({icon:"toast.png",text:"Error: system user management backend command failed to run: "+
c})})};ga.admin.ajax.jobview=function(a,b,c,e){$("#configbody").load("etc/userjob.html",function(){$("#jobtext_label").html("Jobs for "+b);$.ajax({url:ga.jc.url,data:{_window:window.name,_asuser:b,_id:c,_manageid:e}}).success(function(a){$("#seluserjobs").html(a)}).error(function(a){$("#seluserjobs").html("error:"+data)})});$(".modalDialog").addClass("modalDialog_on")};
ga.admin.ajax.cancel=function(a,b,c,e,g){ga.msg.box({icon:"admin.png",text:"Are you sure you want to cancel this '"+e+"' job belonging to "+a+" ?",buttons:[{id:"yes",label:"Yes, cancel the job",cb:ga.admin.ajax.cancel.cb,adata:[a,b,c,g]},{id:"no",label:"No"}]})};ga.admin.ajax.cancel.cb=function(a,b,c,e){$(".modalDialog").removeClass("modalDialog_on");ga.admin.ajax("jobcancel",a,b,c,e)};
ga.extrahidden=function(a){if(ga.set.data.extrahidden&&ga.set.data.extrahidden[a]){var b=$("#"+a),c,e="";for(c in ga.set.data.extrahidden[a])e+='<input type="hidden" name="'+c+'" value="'+ga.set.data.extrahidden[a][c]+'">';b.append(e);delete ga.set.data.extrahidden[a]}};ga.hhelp={};ga.hhelp.reset=function(){if($("#global_data").data("hoverhelp")||0!=$("#global_data").data("hoverhelp"))$(".help_link").removeClass("help_link_on"),$(".help_link").addClass("help_link_on")};
ga.hhelp.set=function(){$("#global_data").data("hoverhelp")&&0!=$("#global_data").data("hoverhelp")?($(".help_link").addClass("help_link_on"),$("#hoverhelp").html("Help on")):($(".help_link").removeClass("help_link_on"),$("#hoverhelp").html("Help off"))};ga.colors=function(a){ga.colors.background=ga.colors.makeRGB(a.background);ga.colors.text=ga.colors.makeRGB(a.text)};ga.colors.makeRGB=function(a){if(/\d{1,3},\s*\d{1,3},\s*\d{1,3}$/.test(a))return a;a=ga.color.toRGB(a);return a.r+","+a.g+","+a.b};
ga.plot_options=function(){var a="rgb( "+ga.colors.text+" )";return{font:{color:a},grid:{hoverable:!1},xaxis:{color:"gray",lineWidth:.5,font:{color:a}},yaxis:{color:"gray",lineWidth:.5,font:{color:a}},lines:{lineWidth:1},zoom:{interactive:!1},pan:{interactive:!1}}};ga.color=function(a){ga.color.data=a;ga.colors(a.body);ga.color.apply()};ga.color.defaults=function(a){ga.browser();ga.color.defaults.data=a;ga.color(a)};
ga.color.toRGB=function(a){if("#"===a.slice(0,1)){var b=parseInt(a.slice(1),16);var c=parseInt(b/256);b-=256*c;a=parseInt(c/256);return{r:a,b:b,g:c-256*a}}(bits=/^rgb\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\s*\)$/.exec(a))?(a=parseInt(bits[1]),c=parseInt(bits[2]),b=parseInt(bits[3])):b=c=a=128;return{r:a,b:b,g:c}};
ga.color.apply=function(){var a;if(ga.directives.data&&ga.directives.data.usercolors&&!/^(off|0|false)$/.test(ga.directives.data.usercolors)){for(c in ga.color.data)ga.color.data.hasOwnProperty(c)&&(a=$(c))&&a.css(ga.color.data[c]);$(".sidebar ul li, .title").css("color",ga.color.data.body.color).hover(function(){$(this).css("color",ga.color.defaults.data.hovercolor.color)},function(){$(this).css("color",ga.color.data.body.color)});$(".svgmenu").css({color:ga.color.data.body.color,stroke:ga.color.data.body.color}).hover(function(){$(this).css({color:ga.color.defaults.data.hovercolor.color,
stroke:ga.color.defaults.data.hovercolor.color})},function(){$(this).css({color:ga.color.data.body.color,stroke:ga.color.data.body.color})});if("#"===ga.color.data.body.background.slice(0,1)){var b=parseInt(ga.color.data.body.background.slice(1),16);a=parseInt(b/256);b-=256*a;var c=parseInt(a/256);a-=256*c;c+=128<c?-20:20;a+=128<a?-20:20;b+=128<b?-20:20;$(".help,.coord").css({background:"rgba("+c+","+a+","+b+",0.8)",color:ga.color.data.body.color})}else $(".help,.coord").css({background:ga.color.data[".help"].background,
color:ga.color.data[".help"].color});if("#"===ga.color.data.body.color.slice(0,1)){b=parseInt(ga.color.data.body.color.slice(1),16);a=parseInt(b/256);b-=256*a;c=parseInt(a/256);a-=256*c;var e=c;var g=a;var f=b;c+=128<c?-12:12;a+=128<a?-12:12;b+=128<b?-12:12;$(".header1").css({color:"rgb("+c+","+a+","+b+")"});c+=128<c?-12:12;a+=128<a?-12:12;b+=128<b?-12:12;$(".header2").css({color:"rgb("+c+","+a+","+b+")"});c+=128<c?-12:12;a+=128<a?-12:12;b+=128<b?-12:12;$(".header3").css({color:"rgb("+c+","+a+","+
b+")"});c+=128<c?-12:12;a+=128<a?-12:12;b+=128<b?-12:12;$(".header4").css({color:"rgb("+c+","+a+","+b+")"});c+=128<c?-12:12;a+=128<a?-12:12;b+=128<b?-12:12;$("hr").css({color:"rgb("+c+","+a+","+b+")"});c=e;a=g;b=f;a+=128<a?-75:75;ga.cssrule.kill("a:link");var k=ga.cssrule.add("a:link");k.style.color="rgb("+c+","+a+","+b+")";a=g;b+=128<b?-75:75;c+=128<c?-75:75;ga.cssrule.kill("a:visited");k=ga.cssrule.add("a:visited");k.style.color="rgb("+c+","+a+","+b+")";b=f;c=e;c+=128<c?-75:75;ga.cssrule.kill("a:active");
k=ga.cssrule.add("a:active");k.style.color="rgb("+c+","+a+","+b+")"}else $(".header1").css({color:ga.color.data[".header1"]?ga.color.data[".header1"].color:ga.color.data.body.color}),$(".header2").css({color:ga.color.data[".header2"]?ga.color.data[".header2"].color:ga.color.data.body.color}),$(".header3").css({color:ga.color.data[".header3"]?ga.color.data[".header3"].color:ga.color.data.body.color}),$(".header4").css({color:ga.color.data[".header4"]?ga.color.data[".header4"].color:ga.color.data.body.color});
$(".modalDialog > div, .modalDialog2 > div, .modalDialog3 > div, .modalDialog4 > div").css({background:ga.browser.gradient?ga.browser.prefix+"linear-gradient("+ga.color.data.body.background+", #222)":ga.color.data.body.background})}};ga.color.reset=function(){ga.color(ga.color.defaults.data)};ga.color.spectrum=function(a){if(!ga.browser.clrpkr)$(a).on("change.spectrum",function(b,c){console.log("hi spectrum"+a);$(a).val(c.toHexString())})};
ga.color.spectrum.val=function(a,b){if(!ga.browser.clrpkr)if(b)$(a).spectrum({color:b});else return $(a).spectrum("get").toHexString()};ga.event=function(a,b,c){ga.event.log.push({menu:a,module:b,action:c,when:new Date})};ga.event.log=[];ga.event.list=function(){for(var a=0,b=ga.event.log.length,c="Client Date/Time is "+(new Date).toUTCString()+"\n";a<b;a++)c+=ga.event.log[a].menu+" "+ga.event.log[a].module+" "+ga.event.log[a].action+" "+ga.event.log[a].when.toUTCString()+"\n";return c};
ga.fc=function(a,b){var c,e;ga.fc.cache[a]?b(ga.fc.cache[a]):ga.fc.waits[a]?ga.fc.waits[a].push(b):(ga.fc.waits[a]=[b],$.ajax(ga.fc.url+a).success(function(b){e=ga.fc.waits[a];delete ga.fc.waits[a];b=$.parseJSON(b);ga.fc.cache[a]=b;for(c=e.length;c--;)e[c](b)}).error(function(b){e=ga.fc.waits[a];delete ga.fc.waits[a];console.log("ajax error");console.dir(b);for(c=e.length;c--;)e[c]("**error**");ga.fc.ajax_error_msg("ajax get error: "+b.statusText)}));return!0};
ga.fc.clear=function(a){var b,c=ga.fc.children(a);for(b in c)ga.fc.cache[b]&&delete ga.fc.cache[b];ga.fc.cache[a]&&delete ga.fc.cache[a];for(b in ga.fc.trees)$(b).length&&("#"!==a?$(b).jstree(!0).refresh_node(a):$(b).jstree(!0).refresh())};ga.fc.refresh=function(a){for(var b in ga.fc.trees)$(b).length&&ga.fc.cache[a]&&("#"!==a?$(b).jstree(!0).refresh_node(a):$(b).jstree(!0).refresh())};
ga.fc.delete_node=function(a){a.length&&(ga.fc.url_delete&&0!==ga.fc.url_delete.length?$.ajax({url:ga.fc.url_delete,data:{_window:window.name,_spec:"fc_cache",_delete:a.join(",")},dataType:"json",method:"POST"}).success(function(b){console.log("ajax delete done");b.error&&b.error.length?ga.fc.delete_error_msg(a,b.error):ga.fc.clear("#")}).error(function(a){console.log("ajax error");console.dir(a);ga.fc.ajax_error_msg("ajax delete error: "+a.statusText)}):console.log("ga.fc.delete_node, no url_delete "+
a.join(",")))};ga.fc.delete_node_message=function(a){var b="You are about to permanently remove "+a.length+" file";if(!a.length)return"Can not remove a directory from here";b=1<a.length?b+"s and/or directories":b+" or directory";return b+" and the contents, including subdirectories, of any directory listed below<p>"};
ga.fc.delete_node_message_files=function(a){return a.length?'<div class="table-wrapper"><table><tr><td>'+$.map($.map(a,$.base64.decode),function(a){return a.substr(2)}).join("</td></tr><tr><td>")+"</td></tr></table></div>":""};ga.fc.children=function(a,b){var c;b=b||{};if(ga.fc.cache[a])for(c=ga.fc.cache[a].length;c--;)if(ga.fc.cache[a][c].children){var e=ga.fc.cache[a][c].id;ga.fc.cache[e]&&(b[e]=!0,b=ga.fc.children(e,b))}return b};ga.fc.cache={};ga.fc.waits={};ga.fc.trees={};
ga.jc=function(a,b){var c,e;ga.jc.cache[a]?b(ga.jc.cache[a]):ga.jc.waits[a]?ga.jc.waits[a].push(b):(ga.jc.waits[a]=[b],$.ajax({url:ga.jc.url,data:{_tree:a,_window:window.name}}).success(function(b){e=ga.jc.waits[a];delete ga.jc.waits[a];b=$.parseJSON(b);ga.jc.cache[a]=b;for(c=e.length;c--;)e[c](b)}).error(function(b){e=ga.jc.waits[a];delete ga.jc.waits[a];console.log("ajax error");console.dir(b);for(c=e.length;c--;)e[c]("**error**");ga.jc.ajax_error_msg("ajax get error: "+b.statusText)}));return!0};
ga.jc.clear_leaf=function(a){var b,c=0,e;for(b in ga.jc.trees)if($(b).length&&(e=$(b).jstree(!0).get_node(a))){c=1;break}c?ga.jc.clear(e.parent):ga.jc.clear("#")};ga.jc.clear=function(a){var b,c=ga.jc.children(a);for(b in c)ga.jc.cache[b]&&delete ga.jc.cache[b];ga.jc.cache[a]&&delete ga.jc.cache[a];for(b in ga.jc.trees)$(b).length&&("#"!==a?$(b).jstree(!0).refresh_node(a):$(b).jstree(!0).refresh())};
ga.jc.refresh=function(a){for(var b in ga.jc.trees)$(b).length&&ga.jc.cache[a]&&("#"!==a?$(b).jstree(!0).refresh_node(a):$(b).jstree(!0).refresh())};
ga.jc.delete_node=function(a){a.length&&(ga.jc.url_delete&&0!==ga.jc.url_delete.length?$.ajax({url:ga.jc.url_delete,data:{_window:window.name,_spec:"fc_cache",_delete:a.join(",")},dataType:"json",method:"POST"}).success(function(b){console.log("ajax delete done");b.error&&b.error.length?ga.jc.delete_error_msg(a,b.error):ga.jc.clear("#")}).error(function(a){console.log("ajax error");console.dir(a);ga.jc.ajax_error_msg("ajax delete error: "+a.statusText)}):console.log("ga.jc.delete_node, no url_delete "+
a.join(",")))};ga.jc.delete_node_message=function(a){var b="You are about to permanently remove "+a.length+" job";1<a.length&&(b+="s");return b};ga.jc.delete_node_message_files=function(a){return a.length?'<div class="table-wrapper"><table><tr><td>'+$.map($.map(a,$.base64.decode),function(a){return a.substr(2)}).join("</td></tr><tr><td>")+"</td></tr></table></div>":""};
ga.jc.children=function(a,b){var c;b=b||{};if(ga.jc.cache[a])for(c=ga.jc.cache[a].length;c--;)if(ga.jc.cache[a][c].children){var e=ga.jc.cache[a][c].id;ga.jc.cache[e]&&(b[e]=!0,b=ga.jc.children(e,b))}return b};ga.jc.cache={};ga.jc.waits={};ga.jc.trees={};ga.altfile=function(a,b,c){ga.altfile.data[a]=ga.altfile.data[a]||{};ga.altfile.data[a][b]=c};ga.altfile.data={};ga.altfile.bdata={};
ga.altfile.list=function(a){var b;if(ga.altfile.data[a])for(b in ga.altfile.data[a])console.log("module:"+a+" idfile:"+b+" idref:"+ga.altfile.data[a][b]);else console.log("module:"+a+" Empty")};ga.altfile.listall=function(){var a;if(ga.altfile.data)for(a in ga.altfile.data)ga.altfile.list(a);else console.log("ga.altfile:no modules")};ga.altfile.test=function(){ga.altfile("module1","field1","ref1");ga.altfile("module1","field2","ref2");ga.altfile("module2","field3","ref3");ga.altfile.listall()};
ga.altfile.add=function(a){var b,c="",e="#"+a;$(e+" ._hidden_altfiles").remove();$(e+" ._hidden_buttonvals").remove();if(ga.altfile.data[a])for(b in ga.altfile.data[a])c+='<input type="hidden" name="_selaltval_'+b+'" value="'+ga.altfile.data[a][b]+'" class="_hidden_altfiles">';if(ga.altfile.bdata[a])for(b in ga.altfile.bdata[a])c+='<input type="hidden" name="'+b+'" value="'+ga.altfile.bdata[a][b].val+'" class="_hidden_buttonvals">';c.length&&$(e).append(c)};
ga.altfile.button=function(a,b,c,e,g,f){ga.altfile.bdata[a]=ga.altfile.bdata[a]||{};ga.altfile.bdata[a][b]={};ga.altfile.bdata[a][b].val={};ga.altfile.bdata[a][b].text=c;ga.altfile.bdata[a][b].call=e;ga.altfile.bdata[a][b].cb=g;ga.altfile.bdata[a][b].req=f||0};ga.altfile.button.value=function(a,b,c){ga.altfile.bdata[a][b].val=c};
ga.altfile.button.call=function(a,b){var c;ga.altfile.bdata[a][b].call.length?(c=$("#_state").data("_logon"))&&c.length?($("#configbody").load("etc/"+ga.altfile.bdata[a][b].call+".html",function(){ga.altfile.bdata[ga.altfile.bdata[a][b].call]={};ga.altfile.bdata[ga.altfile.bdata[a][b].call].cb=ga.altfile.bdata[a][b].cb;$("#"+ga.altfile.bdata[a][b].call+"text_label").text(ga.altfile.bdata[a][b].text)}),ga.repeats.save(),$(".modalDialog").addClass("modalDialog_on")):ga.msg.box({icon:"warning.png",text:"You must login to browse server information",
buttons:[{id:"ok",label:"OK"}]}):ga.altfile.bdata[a][b].cb("cb");return!1};ga.altfile.button.simplecall=function(a,b){$("#configbody").load("ajax/"+a+"/"+b+".html",function(){});ga.repeats.save();$(".modalDialog").addClass("modalDialog_on");return!1};ga.altfile.button.cb=function(){ga.msg.close(1)};
ga.altfile.button.lrfile=function(a,b,c){var e=[],g="#"+b,f="#"+c,k="",h="_hidden_lrfile_sels_"+c;$(g+" ."+h).remove();$.each($(a).jstree("get_checked",!0),function(){this.children.length||(k+='<input type="hidden" name="'+c+'_altval[]" value="'+this.id+'" class="'+h+'" data-type="rfile_val">',e.push($.base64.decode(this.id).substr(2)))});e.length&&($(f+"_altval").html("<i>Server</i>: "+e),$(f+"_msg").empty(),$(f).val(""),$(g).append(k),ga.value.input[b]&&ga.value.input[b][c]&&ga.value.setInputfromRFile(e,
ga.value.input[b][c].mode,ga.value.input[b][c].ids))};
ga.altfile.button.rpath=function(a,b,c){var e=[];b="#"+b;var g="#"+c,f="",k="_hidden_rpath_sels_"+c,h=$(a).jstree(!0);$(b+" ."+k).remove();$.each(h.get_top_checked(!0),function(){h.is_leaf(this)||(f+='<input type="hidden" name="'+c+'[]" value="'+this.id+'" class="'+k+'"><input type="hidden" name="_decodepath_'+c+'" class="'+k+'">',e.push($.base64.decode(this.id).substr(2)))});e.length&&($(g+"_altval").html("<i>Server</i>: "+e),$(g+"_msg").empty(),$(g).val(""),$(b).append(f))};
ga.altfile.button.rfile=function(a,b,c){var e=[],g="#"+b,f="#"+c,k="",h="_hidden_rfile_sels_"+c;$(a).jstree(!0);$(g+" ."+h).remove();$.each($(a).jstree("get_checked",!0),function(){this.children.length||(k+='<input type="hidden" name="'+c+'_altval[]" value="'+this.id+'" class="'+h+'" data-type="rfile_val">',e.push($.base64.decode(this.id).substr(2)))});e.length&&($(f+"_altval").html("<i>Server</i>: "+e),$(f+"_msg").empty(),$(f).val(""),$(g).append(k),ga.value.input[b]&&ga.value.input[b][c]&&ga.value.setInputfromRFile(e,
ga.value.input[b][c].mode,ga.value.input[b][c].ids))};ga.altfile.button.job=function(a,b,c){var e="";b="#"+b;var g="#"+c,f="",k="_hidden_job_sels_"+c;$(a).jstree(!0);$(b+" ."+k).remove();$.each($(a).jstree("get_checked",!0),function(){this.children.length||(f+='<input type="hidden" name="'+c+'_altval[]" value="'+this.id+'" class="'+k+'">',e+="<tr><td>"+this.parent+":"+this.text+"</td></tr>")});e.length&&($(g+"_altval").html("<table>"+e+"</table>"),$(g+"_msg").empty(),$(g).val(""),$(b).append(f))};
ga.altfile.button.getnames=function(a,b){var c=[];switch(b){case "rpath":c.push(a+"[]");break;case "rfile":c.push(a+"_altval[]");break;case "lrfile":a=a.replace(/_button$/,"");c.push(a+"_altval[]");break;default:console.warn("ga.altfile.button.getnames( "+a+" , "+b+" )")}return c};
ga.altfile.button.getnamesinput=function(a,b){var c=[];switch(b){case "rpath":c.push(a);break;case "rfile":c.push(a+"_altval");break;case "lrfile":a=a.replace(/_button$/,"");c.push(a+"_altval");break;default:console.warn("ga.altfile.button.getnames( "+a+" , "+b+" )")}return c};
ga.altfile.button.addhtml=function(a,b,c,e){var g="";switch(c){case "rpath":c="_hidden_rpath_sels_"+b;g+='<input type="hidden" name="'+b+'[]" value="'+e[0]+'" class="'+c+'"><input type="hidden" name="_decodepath_'+b+'" class="'+c+'">';break;case "rfile":g+='<input type="hidden" name="'+b+'_altval[]" value="'+e[0]+'" class="'+("_hidden_rfile_sels_"+b)+'">';break;case "lrfile":b=b.replace(/_button$/,"");g+='<input type="hidden" name="'+b+'_altval[]" value="'+e[0]+'" class="'+("_hidden_lrfile_sels_"+
b)+'">';break;default:console.warn("ga.altfile.button.getnames( "+b+" , "+c+" )")}$("#"+a).append(g)};ga.valid={};ga.valid.checkMatch=function(a,b){$(a).val()!=$(b).val()?$(a+"_msg").html(" does not match"):$(a+"_msg").empty()};ga.valid.checkText=function(a){var b=$(a),c=b.val(),e=0,g=b.attr("pattern"),f=new RegExp(g);g?f.test(c)?(e=1,$(a+"_msg").empty()):c.length||b.prop("required")?$(a+"_msg").html(" wrong format"):e=1:!c&&b.prop("required")?$(a+"_msg").html(" missing required field"):e=1;return e};
ga.valid.checkFloat=function(a){var b=$(a),c=b.val(),e=0;c.match(/^-?(([1-9][0-9]*)|(0))?([.][0-9]+)?([eE][-+]?[0-9]+)?$/)?(e=1,c<parseFloat(b.attr("min"))?(b.val(b.attr("min")),$(a+"_msg").html(" value set to minimum allowed")):c>parseFloat(b.attr("max"))?(b.val(b.attr("max")),$(a+"_msg").html(" value set to maximum allowed")):$(a+"_msg").empty()):c.length||b.prop("required")?$(a+"_msg").html(" wrong format"):e=1;return e};
ga.valid.checkInt=function(a){var b=$(a),c=b.val(),e=0;c.match(/^-?((0)|([1-9][0-9]*))$/)?(e=1,c<parseInt(b.attr("min"))?(b.val(b.attr("min")),$(a+"_msg").html(" value set to minimum allowed")):c>parseInt(b.attr("max"))?(b.val(b.attr("max")),$(a+"_msg").html(" value set to maximum allowed")):parseInt(c)!=c?($(a+"_msg").html(" value rounded to nearset integer"),b.val(parseInt(parseFloat(c)+.5))):$(a+"_msg").empty()):c.length||b.prop("required")?$(a+"_msg").html(" wrong format"):e=1;return e};
ga.valid.safeFile=function(a){var b=$(a);b.val().match("^[a-zA-Z0-9]+([a-zA-Z0-9_.-]+|/[a-zA-Z0-9_-])+$")?$(a+"_msg").empty():(b.val(b.prop("defaultValue")),$(a+"_msg").html("Not an acceptable filename, reset to default"))};ga.valid.checkLrfile=function(a){var b=$(a),c=$(a+"_altval > i");a=$(a+"_msg");var e=0;if(!b||!b.is(":visible"))return 1;b&&b.val()&&b.val().length?e=1:c&&c.html()&&c.html().length&&"Server"===c.html()&&(e=1);e||a.html(" missing required field");return e};
ga.valid.checkRpath=function(a){var b=$(a),c=$(a+"_altval > i");a=$(a+"_msg");var e=0;if(!b||!b.is(":visible"))return 1;c&&c.html()&&c.html().length&&"Server"===c.html()&&(e=1);e||a.html(" missing required field");return e};ga.valid.checkRfile=function(a){var b=$(a),c=$(a+"_altval > i");a=$(a+"_msg");var e=0;if(!b||!b.is(":visible"))return 1;c&&c.html()&&c.html().length&&"Server"===c.html()&&(e=1);e||a.html(" missing required field");return e};
ga.valid.checksubmit=function(a){var b,c=1;if(!ga.altfile.bdata[a]&&!ga.value.types[a])return 1;ga.valid.clearerrorcounter(a);for(b in ga.altfile.bdata[a])if(ga.altfile.bdata[a][b].req)switch(ga.altfile.bdata[a][b].req){case "lrfile":c=c&&ga.valid.checkLrfile("#"+b);$("#"+b).length&&!ga.valid.checkLrfile("#"+b)&&++ga.fielderrors[a];break;case "rpath":c=c&&ga.valid.checkRpath("#"+b);$("#"+b).length&&!ga.valid.checkRpath("#"+b)&&++ga.fielderrors[a];break;case "rfile":c=c&&ga.valid.checkRfile("#"+b);
$("#"+b).length&&!ga.valid.checkRfile("#"+b)&&++ga.fielderrors[a];break;default:console.log("ga.valid.checksubmit() unsupported required check "+ga.altfile.bdata[a][b].req)}for(b in ga.value.types[a])if(ga.value.types[a][b].req)switch(ga.value.types[a][b].req){case "float":$("#"+b).length&&!ga.valid.checkFloat("#"+b)&&++ga.fielderrors[a];break;case "integer":$("#"+b).length&&!ga.valid.checkInt("#"+b)&&++ga.fielderrors[a];break;case "text":$("#"+b).length&&!ga.valid.checkText("#"+b)&&++ga.fielderrors[a];
break;case "file":$("#"+b).length&&!ga.valid.checkLrfile("#"+b)&&++ga.fielderrors[a];break;default:console.log("ga.valid.checksubmit() unsupported required check "+ga.value.types[a][b].req)}0<ga.fielderrors[a]&&(c=0);return c};ga.valid.showerrormessage=function(a){ga.msg.box({icon:"warning.png",text:""+ga.fielderrors[a]+" fields are missing or not set correctly!",buttons:[{id:"ok",label:"OK"}]});ga.fielderrors[a]=0};ga.valid.clearerrorcounter=function(a){ga.fielderrors[a]=0};ga.airavata={};
ga.airavata.select=function(a,b,c,e){var g=ga.airavata.data,f="",k=[],h,d;if("__resource__"==a&&!g.defaultresource||"airavata"!=a&&"__resource__"!=a)return"notused";if(!g.resources||!g.resources.length)return ga.msg.box({icon:"warning.png",text:"No resources currently enabled for Airavata submission"}),"abort";if(1==g.resources.length)return Object.keys(g.resources[l])[0];a="__airavataselect__"!=b?b:g.select.length?g.select:"random";switch(a){case "random":var l=Math.floor(g.resources.length*Math.random());
return Object.keys(g.resources[l])[0];case "choose":k.push({id:"submit_module",label:"Submit",data:[c,e,g.resources],cb:function(a){a[0](a[1],Object.keys(a[2][$("#airavata input[name=selectresource]:checked").val()])[0])}});f='<h3>Select a compute resource and press submit</h3><form id="airavata"><table>';for(h in g.resources)for(d in g.resources[h])f+='<tr><td><input type="radio" name="selectresource" id="airavata_'+h+'" value="'+h+'"'+(0==h?'checked="checked"':"")+'></td><td class="hoverhighlight" style="text-align:left"><label for="airavata_'+
h+'">'+g.resources[h][d]+"</label></td></tr>";ga.msg.box({icon:"question.png",text:f+"</table>",buttons:k});return"deferred";default:return ga.msg.box({icon:"toast.png",text:"ga.airavata.select, unknown selection type '"+a+"'"}),"abort"}};ga.resource={};ga.xsede={};ga.resource.xsedeprojecttokeys=function(){var a;ga.resource.xsedepkeys={};for(a in ga.resource.xsedeproject)ga.resource.xsedepkeys[ga.resource.xsedeproject[a]]=1};
ga.xsede.select=function(a,b,c){var e=ga.xsede.data;a="__resource__"==a?ga.resource.defaultval:a;var g="",f=[],k;delete ga.xsede.useproject;if(!(ga.resource.xsedeproject&&a in ga.resource.xsedepkeys))return b(c);if(!e||!e.length)return ga.msg.box({icon:"warning.png",text:"No XSEDE projects currently defined.  Create one under the user configuration button at the top right."}),"abort";if(1==e.length)return ga.xsede.useproject=e[0],b(c);f.push({id:"submit_xsedeproject",label:"Submit",data:[b,c,e],cb:function(a){ga.xsede.useproject=
a[2][$("#xsedeproject input[name=selectxsedeproject]:checked").val()];a[0](a[1])}});g='<h3>Select an XSEDE project and press submit</h3><form id="xsedeproject"><table>';for(k in e)g+='<tr><td><input type="radio" name="selectxsedeproject" id="xsedeproject_'+k+'" value="'+k+'"'+(0==k?'checked="checked"':"")+'></td><td class="hoverhighlight" style="text-align:left"><label for="xsedeproject_'+k+'">'+e[k]+"</label></td></tr>";ga.msg.box({icon:"question.png",text:g+"</table>",buttons:f});return"deferred"};
ga.value={};ga.value.settings={};
ga.value.checkFloatIntOK=function(a,b){var c=$(a);if(isNaN(b[0]))return c.val(c.prop("defaultValue")),!1;"float"==c.data("type")?b[0]<parseFloat(c.attr("min"))?(b.splice(0,b.length),b.push(c.attr("min"))):b[0]>parseFloat(c.attr("max"))?(b.splice(0,b.length),b.push(c.attr("max"))):$(a+"_msg").empty():"integer"==c.data("type")&&(b[0]<parseInt(c.attr("min"))?(b.splice(0,b.length),b.push(c.attr("min"))):b[0]>parseInt(c.attr("max"))?(b.splice(0,b.length),b.push(c.attr("max"))):parseInt(b[0])!=b[0]?(a=
b[0],b.splice(0,b.length),b.push(parseInt(parseFloat(a)+.5))):$(a+"_msg").empty());return!0};ga.value.sethiddenfields=function(a,b){var c=[];$.each(a[b],function(a,b){$.each(b,function(a,b){c.push(b)})});c=ga.repeat.map.convert(c);for(a=0;a<c.length;a++)$("#"+c[a]).data("repeater")&&$("#"+c[a]+"-repeater").hide(),$("#"+c[a]+", label[for="+c[a]+"]").hide()};
ga.value.showfields=function(a,b,c,e){var g=[];$.each(a[b],function(a,b){console.log(a);a==c[e]&&$.each(b,function(a,b){console.log(b);g.push(b)})});for(a=0;a<g.length;a++)$("#"+g[a]).data("repeater")&&$("#"+g[a]+"-repeater").show(),$("#"+g[a]+", label[for="+g[a]+"]").show()};
ga.value.modifyformdata=function(a,b,c,e,g){var f=[],k;console.log(e);$.each(a[b],function(a,b){console.log(a);-1!==jQuery.inArray(a,e)&&$.each(b,function(a,b){f.push(b)})});f=ga.repeat.map.convert(f);for(a=0;a<f.length;a++){if($("#"+f[a]).data("repeater")){var h=ga.repeat.children(b,f[a]);for(k in h)h=f[a]+"-"+k,c.delete(h)}c.delete(f[a])}c.append("currentstage",ga.stages[b][g])};
ga.value.processInputfromFiles=function(a,b,c,e){var g=a.trim().split(/[\r\n]+/g),f=[],k=0;c=ga.repeat.map.convert(c);for(var h=0;h<g.length;h++){var d=g[h].trim().split(/\s+/);k+=d.length;f.push(k)}k=[];var l=[],q=[],m=[],x=[],r=[];d=[];var v=0;switch(b){case "whitespace_formulchcompost":a=[];for(h=0;h<g.length;h++)f=g[h].split("#")[0],f=f.replace(/\s{2,}/g," "),f=f.replace(/\t/g," "),f=f.toString().trim().replace(/(\r\n|\n|\r)/g,""),a.push(f);g=parseInt(a[1]);for(h=0;h<a.length;h++)if(2<h&&h<3+
g){var p=a[h].trim().split(/\s+/);for(f=0;f<p.length;f++)l.push(p[f])}else k.push(a[h]);d.push(l);for(h=0;h<c.length;h++)switch($("#"+c[h]).attr("type")){case "text":l=new RegExp($("#"+c[h]).attr("pattern"));if(!l.test(k[h])){ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",buttons:[{id:"ok",label:"OK"}]});return}break;case "number":l=
[k[h]];if(ga.value.checkFloatIntOK("#"+c[h],l))k[h]=l[0];else{ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",buttons:[{id:"ok",label:"OK"}]});return}break;default:ga.msg.box({icon:"warning.png",text:"Selected input type is currently not supported. Contact the developer",buttons:[{id:"ok",label:"OK"}]});return}break;case "whitespace_formulchrg":case "whitespace_formulchcontrast":a=
[];for(h=0;h<g.length;h++)f=g[h].split("#")[0],f=f.replace(/\s{2,}/g," "),f=f.replace(/\t/g," "),f=f.toString().trim().replace(/(\r\n|\n|\r)/g,""),a.push(f);g=parseInt(a[1]);var u=parseInt(a[2+g]),w=parseInt(a[5+g+u]),A=parseInt(a[9+g+u+w]);for(h=0;h<a.length;h++)if(1<h&&h<2+g)for(p=a[h].trim().split(/\s+/),f=0;f<p.length;f++)l.push(p[f]);else h>2+g&&h<3+g+u?(p=a[h].trim().split(/\s+/),q.push(p[1]),q.push(p[2]),q.push(p[0]),q.push(p[3])):h>5+g+u&&h<6+g+u+w?(p=a[h].trim().split(/\s+/),m.push(p[1]),
m.push(p[2]),m.push(p[0]),m.push(p[3])):h>8+g+u+w&&h<9+g+u+w+A?(p=a[h].trim().split(/\s+/),x.push(p[1]),x.push(p[2]),x.push(p[0]),x.push(p[3])):k.push(a[h]);r.push(l);r.push(q);r.push(m);r.push(x);for(h=f=0;h<c.length;h++)if($("#"+c[h]).length)switch($("#"+c[h]).data("repeater")&&(d.push(r[f]),f++),$("#"+c[h]).attr("type")){case "text":l=new RegExp($("#"+c[h]).attr("pattern"));if(!l.test(k[h])){ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",
buttons:[{id:"ok",label:"OK"}]});return}break;case "number":l=[k[h]];if(ga.value.checkFloatIntOK("#"+c[h],l))k[h]=l[0];else{ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",buttons:[{id:"ok",label:"OK"}]});return}break;default:ga.msg.box({icon:"warning.png",text:"Selected input type is currently not supported. Contact the developer",buttons:[{id:"ok",
label:"OK"}]});return}else f++;break;case "whitespaceseparated":case "whitespaceseparated_reverselogic":k=a.trim().split(/\s+/);if(k.length==c.length)for(h=0;h<k.length;h++){for(r=0;r<f.length;r++)if(h+1<=f[r]){v=r+1;break}switch($("#"+c[h]).attr("type")){case "checkbox":l=/^(0|1|n|y|true|false|t|f|yes|no)$/;if(!l.test(k[h].toLowerCase())){ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Checkbox input value on the line #"+v+" is not valid. Options are: [1 | 0 | yes | no | true | false | t | f | T | F | y | n | Y | N ]. Check your input file",
buttons:[{id:"ok",label:"OK"}]});return}break;case "number":l=[k[h]];if(ga.value.checkFloatIntOK("#"+c[h],l))k[h]=l[0];else{ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",buttons:[{id:"ok",label:"OK"}]});return}break;case "text":l=new RegExp($("#"+c[h]).attr("pattern"));if(!l.test(k[h])){ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Input value on the line #"+
v+" is not a valid number. Options are: [Integer | Float point number | Number with exponent]. Check your input file",buttons:[{id:"ok",label:"OK"}]});return}break;default:ga.msg.box({icon:"warning.png",text:"Selected input type is currently not supported. Contact the developer",buttons:[{id:"ok",label:"OK"}]});return}}else{ga.msg.box({icon:"warning.png",text:"Wrong format of the input file! Number of parameters is inconsistent with the model chosen. Check your parameter file",buttons:[{id:"ok",label:"OK"}]});
return}break;default:ga.msg.box({icon:"warning.png",text:"Selected file parsing mode is currently not supported. Contact the developer",buttons:[{id:"ok",label:"OK"}]});return}for(h=v=0;h<k.length;h++){switch($("#"+c[h]).attr("type")){case "checkbox":if(0<=b.indexOf("reverselogic"))switch(k[h].toLowerCase()){case "0":case "false":case "f":case "n":case "no":$("#"+c[h]).prop("checked",!0);break;case "1":case "true":case "t":case "yes":case "y":case "r":$("#"+c[h]).prop("checked",!1)}else switch(k[h].toLowerCase()){case "0":case "false":case "f":case "n":case "no":$("#"+
c[h]).prop("checked",!1);break;case "1":case "true":case "t":case "yes":case "y":case "r":$("#"+c[h]).prop("checked",!0)}default:$("#"+c[h]).val(k[h]),$("#"+c[h]).prop("defaultValue",k[h])}if($("#"+c[h]).data("repeater")){ga.repeat.change(e,c[h]);children=ga.repeat.children(e,c[h]);l=$("#"+c[h]).val();q=0;for(r=1;r<=l;++r)for(t in m=0,children)if(x=d[v][q],f=c[h]+"-"+t+"-"+(r-1),++m,"whitespace_formulchrg"!=b&&"whitespace_formulchcompost"!=b||1!=m)"whitespace_formulchcompost"==b&&2==m?("r"==x.toLowerCase()&&
$("#"+f).prop("checked",!0),"f"==x.toLowerCase()&&$("#"+f).prop("checked",!1)):"whitespace_formulchcompost"==b&&5==m||$("#"+f).val(x),q++;ga.repeat.change(e,c[h]);v++}}};ga.value.input={};ga.value.setInputForRFile=function(a,b,c,e,g){ga.value.input[a]=ga.value.input[a]||{};ga.value.input[a][c]={};ga.value.input[a][c].id=c;ga.value.input[a][c].tag=b;ga.value.input[a][c].mode=e;ga.value.input[a][c].ids=g};ga.value.types={};
ga.value.registerid=function(a,b,c,e){ga.value.types[a]=ga.value.types[a]||{};ga.value.types[a][b]={};ga.value.types[a][b].id=b;ga.value.types[a][b].label=c;ga.value.types[a][b].req=e||0};ga.value.setInputfromRFile=function(a,b,c,e){var g=c.split(",");c=$("#_state").data("_logon");$.get("results/users/"+c+"/"+a,function(a){ga.value.processInputfromFiles(a,b,g,e)},"text")};
ga.value.setInputfromFile=function(a,b,c,e){$(a).hide();var g=c.split(",");$(a).change(function(c){c=$(a)[0].files[0];var f=new FileReader;f.onload=function(a){ga.value.processInputfromFiles(a.target.result,b,g,e)};f.readAsText(c)})};
ga.value.setLastValue=function(a,b,c){var e=a+":"+b+":last_value",g=a+":"+b+":default_value",f=$(b);if(!/_output$/.test(a))return!1;if(void 0==$("#global_data").data(e))switch(f.attr("type")){case "checkbox":case "radio":$("#global_data").data(e,f.is(":checked"));$("#global_data").data(g,f.is(":checked"));break;case "div":case "msgs":$("#global_data").data(e,f.html());$("#global_data").data(g,f.html());break;case "plot3d":case "plotly":b=b.replace(/^#/,"");Plotly.newPlot(b,[],{});Plotly.purge(b);
break;case "plot2d":break;case "ngl":ga.ngl.clear(e,b);break;case "bokeh":ga.bokeh.renderdata(a,b.replace(/^#/,""));break;case "filelink":case "filelinkm":$("#global_data").data(e,$(b+"_filelink").html());break;default:c&&f.val(c),$("#global_data").data(e,f.val()),$("#global_data").data(g,f.val())}else switch(f.attr("type")){case "checkbox":case "radio":f.prop("checked",$("#global_data").data(e));break;case "div":case "msgs":f.html($("#global_data").data(e));break;case "atomicstructure":b=b.replace(/^#/,
"");$("#global_data").data(e)?(_jmol_info[b].script=$("#global_data").data(e),f.html(Jmol.getAppletHtml("jmolApplet"+b,_jmol_info[b]))):f.empty();break;case "plot2d":a=gd.data(e);a.data?(ga.value.set.plot2d(b,a.options),f.plot(a.data,ga.value.get.plot2d.plot_options(b,a.options))):f.plot(a,ga.value.get.plot2d.plot_options(b));break;case "plot3d":case "plotly":f=gd.data(e);f.data&&Plotly.plot(b.replace(/^#/,""),f.data,f.layout);break;case "bokeh":break;case "ngl":(f=gd.data(e))&&ga.value.nglshow(a,
b.replace(/^#/,""),f);break;case "filelink":case "filelinkm":$(b+"_filelink").html($("#global_data").data(e));break;default:f.val($("#global_data").data(e))}};
ga.value.saveLastValue=function(a,b){var c=$(b);switch(c.attr("type")){case "file":break;case "checkbox":case "radio":$("#global_data").data(a+":"+b+":last_value",c.is(":checked"));break;case "div":case "msgs":$("#global_data").data(a+":"+b+":last_value",c.html());break;case "plot2d":break;case "bokeh":break;case "filelink":case "filelinkm":$("#global_data").data(a+":"+b+":last_value",$(b+"_filelink").html());break;case "atomicstructure":c=b.replace(/^#/,"");_jmol_info&&_jmol_info[c]&&_jmol_info[c].length?
$("#global_data").data(a+":"+b+":last_value",_jmol_info[c].script):$("#global_data").data(a+":"+b+":last_value","");break;default:$("#global_data").data(a+":"+b+":last_value",c.val())}};ga.value.saveLastValues=function(a){$("#"+a+" :input").each(function(){ga.value.saveLastValue(a,"#"+$(this).attr("id"))})};
ga.value.resetDefaultValue=function(a,b){var c=$(b);if("SELECT"==c.prop("tagName"))c.val($("#global_data").data(a+":"+b+":default_value"));else switch(c.attr("type")){case "ngl":ga.ngl.clear(a+":"+b+":last_value",b);break;case "file":return;case "checkbox":$("#global_data").removeData(a+":"+b+":repeat:count");case "radio":c.prop("checked",$("#global_data").data(a+":"+b+":default_value"));break;case "div":case "msgs":c.html($("#global_data").data(a+":"+b+":default_value"));break;case "filelink":case "filelinkm":$(b+
"_filelink").html(" ");break;case "plot2d":console.log("ga.value.resetDefaultValue() plot2d, t is "+b);$("#global_data").data(a+":"+b+":last_value",[[]]);ga.value.clear.plot2d(b);c.plot([[]],ga.value.get.plot2d.plot_options(b));$(b+"_showcollapse").length&&($(b+"_div").hide(),$(b+"_savetofile").length&&($(b+"_savetofile").hide(),$(b+"_savetofile_link").hide()),$(b+"_changescalex").length&&($(b+"_changescalex").hide(),$(b+"_changescalex_message").hide()),$(b+"_changescaley").length&&($(b+"_changescaley").hide(),
$(b+"_changescaley_message").hide()),$(b+"_showcollapse").length&&$(b+"_showcollapse").addClass("hidden"));break;case "bokeh":ga.bokeh.reset(a,b.replace(/^#/,""));break;case "plot3d":case "plotly":console.log("reset default value for plot3d: "+b);Plotly.purge(b.replace(/^#/,""));$(b+"_showcollapse").length&&$(b+"_showcollapse").addClass("hidden");break;case "image":c.empty();break;case "video":c.empty();break;case "atomicstructure":b.replace(/^#/,"");$("#global_data").data(a+":"+b+":last_value","");
$(b).empty();break;default:c.val(c.attr("value"))}ga.value.saveLastValue(a,b);$(b+"_msg").empty()};ga.value.resetDefaultValues=function(a,b){var c;if(!/_output$/.test(a))return!1;$("#"+a+" :input").each(function(){ga.value.resetDefaultValue(a,"#"+$(this).attr("id"))});ga.sync.reset(a);for(c in ga.value.extra_resets.data)ga.value.resetDefaultValue(a,"#"+c);b&&(ga.value.resetDefaultValue(a,"#"+a+"_msgs"),b="#"+a+"_textarea",ga.value.resetDefaultValue(a,b),$(b).hide(),$(b+"_label").hide())};
ga.value.extra_resets=function(a){ga.value.extra_resets.data=ga.value.extra_resets.data||{};ga.value.extra_resets.data[a]=1};ga.value.extra_resets.clear=function(){ga.value.extra_resets.data={}};
ga.value.setLastValueOutput=function(a){var b="#"+a,c=b+"_textarea",e=$(c);ga.value.setLastValue(a,b+"_msgs");ga.value.setLastValue(a,c);e.val()?(e.show(),$(c+"_label").show(),e.height(parseFloat(e.prop("scrollHeight"))+parseFloat(e.css("borderTopWidth"))+parseFloat(e.css("borderBottomWidth")))):(e.hide(),$(c+"_label").hide())};ga.value.get={};ga.value.set={};ga.value.clear={};
ga.value.set.plot2d=function(a,b){var c=a+"_xlabel",e=a+"_ylabel";$(a+"_title").html(b.title?b.title:"");$(c).html(b.xlabel?b.xlabel:"");$(e).html(b.ylabel?b.ylabel:"")};ga.value.clear.plot2d=function(a){var b=a+"_xlabel",c=a+"_ylabel";tagxy=a+"_xy";$(a+"_title").empty();$(b).empty();$(c).empty();$(tagxy).empty()};ga.value.set.plot2d.pan=function(a,b){ga.value.settings[a]=ga.value.settings[a]||{};ga.value.settings[a].pan=b?!0:!1};
ga.value.set.plot2d.zoom=function(a,b,c){tagxy=a+"_xy";ga.value.settings[a]=ga.value.settings[a]||{};ga.value.settings[a].zoom=b?!0:!1;b&&(ga.value.settings[a].pkg=c,$(a+"_title,"+a+"_xlabel,"+a+"_ylabel,"+a+"_xy").on("click",ga.value.set.plot2d.zoom.click))};ga.value.set.plot2d.pkg=function(a,b){ga.value.settings[b]=ga.value.settings[b]||{};ga.value.settings[b].pkg=a;$(b+"_title,"+b+"_xlabel,"+b+"_ylabel,"+b+"_xy").on("click",ga.value.set.plot2d.reset)};
ga.value.set.plot2d.reset=function(a){var b="#"+a.target.id.replace(/(_title|_xlabel|_ylabel|_xy)$/,"");a.preventDefault();ga.value.setLastValue(ga.value.settings[b].pkg,b)};ga.value.set.plot2d.hover=function(a,b){ga.value.settings[a]=ga.value.settings[a]||{};ga.value.settings[a].hover=b?!0:!1};ga.value.set.plot2d.selzoom=function(a,b){ga.value.settings[a]=ga.value.settings[a]||{};ga.value.settings[a].selzoom=b?!0:!1};
ga.value.set.plot2d.backgroundcolor=function(a,b){ga.value.settings[a]=ga.value.settings[a]||{};ga.value.settings[a].backgroundcolor=b};ga.value.get.plot2d={};
ga.value.get.plot2d.plot_options=function(a,b){var c=ga.plot_options();ga.value.settings[a].backgroundcolor&&(c.grid={backgroundColor:ga.value.settings[a].backgroundcolor});ga.value.settings[a].selzoom&&(c.selection={mode:"xy"});b&&(b.grid&&(c.grid=$.extend({},c.grid,b.grid)),b.selection&&(c.selection=$.extend({},c.selection,b.selection)));c.pan.interactive=ga.value.settings[a].pan?!0:!1;c.zoom.interactive=ga.value.settings[a].zoom?!0:!1;c.grid.hoverable=ga.value.settings[a].hover?!0:!1;if(b){b.legend&&
(c.legend=b.legend,b.legend.container&&(c.legend.container=$(a+"_legend")));b.xmin&&(c.xaxis.min=b.xmin);b.xmax&&(c.xaxis.max=b.xmax);if(b.xscale)switch(b.xscale){case "log":c.xaxis.transform=function(a){return 0<a?Math.log(a):1E-99};c.xaxis.inverseTransform=function(a){return Math.exp(a)};c.xaxis.tickFormatter=ga.value.plot2d.ticformatter;break;default:console.log("ga.value.get.plot2d.plot_options( "+a+" , options ) has unsupported xscale of "+b.xscale)}b.xtics&&(c.xaxis.ticks=b.xtics);b.ymin&&(c.yaxis.min=
b.ymin);b.ymax&&(c.yaxis.max=b.ymax);if(b.yscale)switch(b.yscale){case "log":c.yaxis.transform=function(a){return 0<a?Math.log(a):1E-99};c.yaxis.inverseTransform=function(a){return Math.exp(a)};c.yaxis.tickFormatter=ga.value.plot2d.ticformatter;break;default:console.log("ga.value.get.plot2d.plot_options( "+a+" , options ) has unsupported yscale of "+b.yscale)}b.ytics&&(c.yaxis.ticks=b.ytics)}return c};ga.value.plot2d={};ga.value.plot2d.zstack={};
ga.value.plot2d.zstack.reset=function(a){ga.value.plot2d.stack=ga.value.plot2d.stack||{};ga.value.plot2d.stack[a]=[];ga.value.plot2d.waspush=ga.value.plot2d.waspush||{};ga.value.plot2d.waspush[a]=!1};ga.value.plot2d.zstack.dopop=function(a){ga.value.plot2d.waspush=ga.value.plot2d.waspush||{};return ga.value.plot2d.stack[a]&&ga.value.plot2d.stack[a].length?(ga.value.plot2d.waspush[a]&&ga.value.plot2d.stack[a].pop(),ga.value.plot2d.waspush[a]=!1,ga.value.plot2d.stack[a].pop()):!1};
ga.value.plot2d.zstack.dopush=function(a,b){ga.value.plot2d.stack=ga.value.plot2d.stack||{};ga.value.plot2d.stack[a]=ga.value.plot2d.stack[a]||[];ga.value.plot2d.stack[a].push(b);ga.value.plot2d.waspush=ga.value.plot2d.waspush||{};ga.value.plot2d.waspush[a]=!0};ga.value.plot2d.toFP=function(a,b){return 0<b?a.toFixed(b):6<a.toString().length?a.toExponential(3).replace(/0+e/,"e").replace(/\.e/,"e"):a.toFixed(0)};
ga.value.plot2d.ticformatter=function(a,b){if(!b._ehb||a<=b.min)return b._ehb={},b._ehb.pv=a,b._ehb.min=Math.min(b.min,b.max),b._ehb.max=Math.max(b.min,b.max),b._ehb.tmin=b.options.transform(b._ehb.min),b._ehb.tmax=b.options.transform(b._ehb.max),b._ehb.tmaxr=1/b._ehb.tmax,b._ehb.rnge=b._ehb.max-b._ehb.min,ga.value.plot2d.toFP(a,b.tickDecimals);if(!b._ehb.snd)return b._ehb.snd=!0,b._ehb.sndv=a,b._ehb.ptd=(b.options.transform(a)-b._ehb.tmin)*b._ehb.tmaxr,ga.value.plot2d.toFP(a,b.tickDecimals);if(!b._ehb.tr)return b._ehb.tr=
2*Math.abs(a-b._ehb.sndv)/b._ehb.rnge,b._ehb.ptd=Math.abs(b.options.transform(a)-b._ehb.tmin)*b._ehb.tmaxr,ga.value.plot2d.toFP(a,b.tickDecimals);var c=(b.options.transform(a)-b._ehb.tmin)*b._ehb.tmaxr;return Math.min(Math.abs(c-b._ehb.ptd),1-c)>=b._ehb.tr?(b._ehb.ptd=c,ga.value.plot2d.toFP(a,b.tickDecimals)):""};ga.ngl={};ga.ngl.types="backbone ball+stick cartoon contact helixorient hyperball label licorice line point ribbon rocket rope spacefill surface trace tube".split(" ");
ga.ngl.clear=function(a,b){ga.ngl[a]&&(ga.ngl[a].stage&&ga.ngl[a].stage.dispose(),delete ga.ngl[a]);$(b+"_plot").empty();$(b+"_buttons").empty();$("#global_data").removeData(a)};
ga.value.nglshow=function(a,b,c){var e="#"+b;ga.ngl=ga.ngl||{};var g=a+":"+e+":last_value";ga.ngl.clear(g,e);c.loadname&&(c.loadparams||(c.loadparams={}),c.representation||(c.representation="cartoon"),ga.ngl[g]={},ga.ngl[g].stage=new NGL.Stage(b+"_plot"),ga.ngl[g].stage.loadFile(c.loadname,c.loadparams).then(function(a){ga.ngl[g].component=a;ga.ngl[g].reps={};ga.ngl[g].reps[c.representation]=a.addRepresentation(c.representation);a.autoView();a=ga.ngl.types.length;for(var b="",f="",d=0;d<a;++d)b+=
'<button id="'+ga.ngl.types[d].replace("+","")+'">'+ga.ngl.types[d]+"</button>",f+='$("#'+ga.ngl.types[d].replace("+","")+'").on("click", function() { var sk = ga.ngl["'+g+'"]; var comp = sk.component; var crep = sk.reps["'+ga.ngl.types[d]+'"]; if ( comp && crep ) { comp.removeRepresentation( crep ); delete sk.reps["'+ga.ngl.types[d]+'"]; } else { sk.reps["'+ga.ngl.types[d]+'"] = comp.addRepresentation("'+ga.ngl.types[d]+'");} return false; });';$(e+"_buttons").html(b);eval(f)}),$("#global_data").data(g,
c));ga.value.extra_resets(b)};ga.pull={};ga.pull.clearPull=function(a){a&&"string"==typeof a&&0!=a.length&&"#__fields:repeat__"!=a||(a="");$("#global_data").data("_pull_json"+a,{});$("#global_data").data("_pull_update"+a,{});$("#global_data").data("_pull_type"+a,{})};
ga.pull.toPull=function(a,b,c,e,g){g&&"string"==typeof g&&0!=g.length&&"#__fields:repeat__"!=g||(g="");a=$("#global_data");var f=a.data("_pull_json"+g)||{},k=a.data("_pull_update"+g)||{};f[e]=0;"object"!=typeof k[e]&&(k[e]={});k[e][b]=c;a.data("_pull_json"+g,f);a.data("_pull_update"+g,k)};
ga.pull.doPull=function(a){a&&"string"==typeof a&&0!=a.length&&"#__fields:repeat__"!=a||(a="");var b=$("#global_data"),c=$("#_state").data("_logon");if(c&&c.length){var e=b.data("_pull_json"+a);e._window=window.name;e._logon=c;2<Object.size(e)&&$.getJSON("ajax/sys_config/sys_pull.php",e).done(function(c,e,k){var f=b.data("_pull_update"+a);$.each(c,function(a,b){"object"==typeof f[a]&&$.each(f[a],function(a,c){var e=$(a);switch(c){case "checkbox":e.prop("checked","on"==b);break;case "text":"color"==
e.attr("data-type")&&ga.color.spectrum.val(a,b);case "email":case "integer":case "float":e.val(b);break;case "listbox":e.empty();$.each(b,function(a,b){e.append($("<option></option>").attr("value",b).text(b))});break;case "label":e.html(b);break;default:console.log("ga.pull.doPull(): not yet")}})})}).fail(function(a,b,c){})}else e=b.data("_pull_json"+a),e._window=window.name,1<Object.size(e)&&$.getJSON("ajax/sys_config/sys_pull.php",e).done(function(c,e,k){var f=b.data("_pull_update"+a);$.each(c,
function(a,b){"object"==typeof f[a]&&$.each(f[a],function(a,c){var e=$(a);switch(c){case "checkbox":e.prop("checked","on"==b);break;case "text":"color"==e.attr("data-type")&&ga.color.spectrum.val(a,b);case "email":case "integer":case "float":e.val(b);break;case "listbox":e.empty();$.each(b,function(a,b){e.append($("<option></option>").attr("value",b).text(b))});break;case "label":e.html(b);break;default:console.log("ga.pull.doPull(): not yet")}})})}).fail(function(a,b,c){})};ga.repeats={};
ga.repeats.cache={};ga.repeats.cache._jmol_info={};ga.repeats.cache.specproj=[];ga.repeats.save=function(){ga.repeats.cache._jmol_info=_jmol_info||{};ga.repeats.cache.specproj=ga.specproj.data||[]};ga.repeats.restore=function(){_jmol_info=ga.repeats.cache._jmol_info;ga.specproj.data=ga.repeats.cache.specproj};ga.repeat={};ga.repeat.data={};ga.repeat.map={};
ga.repeat.repeat=function(a,b,c,e){ga.repeat.data[a]=ga.repeat.data[a]||{};ga.repeat.data[a].repeat=ga.repeat.data[a].repeat||{};ga.repeat.data[a].repeat[b]={};ga.repeat.data[a].repeat[b].html=c;ga.repeat.data[a].repeat[b].eval=e;ga.repeat.map[b]=b;ga.repeat.data[a].repeat[b].htmlr=c.replace(/<\/label>/,"%%label%%</label>").replace(RegExp('id="'+b+'"'),'id="%%id%%"').replace(RegExp('name="'+b),'name="%%id%%').replace(RegExp('for="'+b+'"'),'for="%%id%%"').replace(RegExp('id="'+b+'_msg"'),'id="%%id%%_msg"').replace(RegExp('id="'+
b+'_tr"'),'id="%%id%%_tr"').replace(RegExp('id="'+b+'_button"'),'id="%%id%%_button"').replace(RegExp('="'+b+'_altval"',"g"),'="%%id%%_altval"').replace(RegExp('name="_selaltval_'+b+'"'),'name="_selaltval_%%id%%"').replace(RegExp('id="'+b+'-repeater"'),'id="%%id%%-repeater"');ga.repeat.data[a].repeat[b].htmls=c.replace(/<td><label.*?>(.*?)<\/label>\s*<\/td>/,"%%td%%$1%%etd%%").replace(/(<td[^>]*>).*?<\/td>/g,"$1</td>").replace(/<input[^>]*>/g,"").replace(/<span[^>]*>.*?<\/span>/g,"").replace(/\s*id=".*?"\s*/g,
"").replace("%%td%%","<td>").replace("%%etd%%","</td>").replace("<td></td>","");ga.repeat.data[a].repeat[b].evalr=e.replace(RegExp('"#'+b+'"',"g"),'"#%%id%%"').replace(RegExp('"#'+b+" option","g"),'"#%%id%% option').replace(RegExp(":"+b+":","g"),":%%id%%:").replace(RegExp('"#'+b+'_msg"',"g"),'"#%%id%%_msg"').replace(RegExp('"'+b+'"',"g"),'"%%id%%"').replace(RegExp('"#'+b+'_button"',"g"),'"#%%id%%_button"').replace(RegExp('"'+b+'_altval"',"g"),'"%%id%%_altval"').replace(RegExp('"#'+b+'_altval"',"g"),
'"#%%id%%_altval"');return'<tr><td></td><td><span id="'+b+'-span"></span></td></tr>'};
ga.repeat.repeatOn=function(a,b,c){var e=/^(.*):(.*)$/.exec(c);c=c.replace(":","-");ga.repeat.data[a].repeater=ga.repeat.data[a].repeater||{};ga.repeat.data[a].repeater[c]=ga.repeat.data[a].repeater[c]||{};ga.repeat.data[a].repeater[c].child=ga.repeat.data[a].repeater[c].child||[];ga.repeat.data[a].repeater[c].child.push(b);ga.repeat.data[a].repeat[b].refid=c;e&&(c=e[1],e=e[2],ga.repeat.data[a].repeater[c]=ga.repeat.data[a].repeater[c]||{},ga.repeat.data[a].repeater[c].child=ga.repeat.data[a].repeater[c].child||
[],ga.repeat.data[a].repeater[c].choice=ga.repeat.data[a].repeater[c].choice||[],ga.repeat.data[a].repeater[c].child.push(b),ga.repeat.data[a].repeater[c].choice.push(e))};
ga.repeat.repeater=function(a,b,c,e){ga.repeat.data[a]=ga.repeat.data[a]||{};ga.repeat.data[a].repeater=ga.repeat.data[a].repeater||{};ga.repeat.data[a].repeater[b]=ga.repeat.data[a].repeater[b]||{};ga.repeat.data[a].repeater[b].type=c;e&&"__fields:tableize__"!=e&&!/^(off|false)$/i.test(e)&&(ga.repeat.data[a].repeater[b].tableize=1)};
ga.repeat.children=function(a,b,c){var e;c=c||{};if(!(ga.repeat.data[a]&&ga.repeat.data[a].repeater&&ga.repeat.data[a].repeater[b]&&ga.repeat.data[a].repeater[b].child))return c;for(e=0;e<ga.repeat.data[a].repeater[b].child.length;++e)c[ga.repeat.data[a].repeater[b].child[e]]=!0,ga.repeat.data[a].repeater[e]&&(c=ga.repeat.children(a,e,c));return c};
ga.repeat.change=function(a,b,c){var e=[],g="#"+b;var f=$(g);var k="",h="",d,l;if(!(ga.repeat.data[a]&&ga.repeat.data[a].repeater&&ga.repeat.data[a].repeater[b]&&f.length))return!1;switch(ga.repeat.data[a].repeater[b].type){case "checkbox":f=f.prop("checked")?1:0;break;case "integer":case "listbox":f=f.val();break;default:return console.warn("ga.repeat.change( "+a+" , "+b+" ) type "+ga.repeat.data[a].repeater[b].type+" not supported"),!1}if(!c&&ga.repeat.data[a].repeater[b].value===f)return!1;var q=
ga.repeat.children(a,b);switch(ga.repeat.data[a].repeater[b].type){case "checkbox":if(f)for(d in q){var m=b+"-"+d;ga.repeat.map[d]=m;k+=ga.repeat.data[a].repeat[d].htmlr.replace(/%%id%%/g,m).replace("%%label%%","");h+=ga.repeat.data[a].repeat[d].evalr.replace(/%%id%%/g,m);ga.repeat.data[a].repeater[d]&&(ga.repeat.data[a].repeater[m]||(ga.repeat.data[a].repeater[m]=jQuery.extend({},ga.repeat.data[a].repeater[d])),e.push(m),ga.repeat.data[a].repeater[m].value&&delete ga.repeat.data[a].repeater[m].value)}break;
case "integer":if(ga.repeat.data[a].repeater[b].tableize&&0<f)for(d in q)k+=ga.repeat.data[a].repeat[d].htmls;for(l=1;l<=f;++l)for(d in q)m=b+"-"+d+"-"+(l-1),ga.repeat.map[d]=m,k+=ga.repeat.data[a].repeat[d].htmlr.replace(/%%id%%/g,m).replace("%%label%%","["+l+"]").replace(ga.repeat.data[a].repeater[b].tableize?/<td.*?><label.*?>.*?<\/label><\/td>/:"",""),h+=ga.repeat.data[a].repeat[d].evalr.replace(/%%id%%/g,m),ga.repeat.data[a].repeater[d]&&(ga.repeat.data[a].repeater[m]||(ga.repeat.data[a].repeater[m]=
jQuery.extend({},ga.repeat.data[a].repeater[d])),e.push(m),ga.repeat.data[a].repeater[m].value&&delete ga.repeat.data[a].repeater[m].value);break;case "listbox":q=b.replace(/-[0-9]+$/,"").replace(/^(.*)-([A-ZA-z0-9_]*)$/,"$2")+"-"+f;l=b+"-"+f;q=ga.repeat.children(a,q);for(d in q)m=l+"-"+d,ga.repeat.map[d]=m,k+=ga.repeat.data[a].repeat[d].htmlr.replace(/%%id%%/g,m).replace("%%label%%",""),h+=ga.repeat.data[a].repeat[d].evalr.replace(/%%id%%/g,m),ga.repeat.data[a].repeater[d]&&(ga.repeat.data[a].repeater[m]||
(ga.repeat.data[a].repeater[m]=jQuery.extend({},ga.repeat.data[a].repeater[d])),e.push(m),ga.repeat.data[a].repeater[m].value&&delete ga.repeat.data[a].repeater[m].value);break;default:return console.warn("ga.repeat.change( "+a+" , "+b+" ) type "+ga.repeat.data[a].repeater[b].type+" not supported"),!1}!/^<tr>/.test(k)&&/<\/tr>$/.test(k)&&(k="<tr>"+k);$(g+"-repeater").html(k);eval(h);ga.repeat.data[a].repeater[b].value=f;for(d=0;d<e.length;++d)ga.repeat.change(a,e[d],c);$("#global_data").data("_pull_json#"+
b)&&ga.pull.doPull("#"+b);ga.hhelp.reset()};ga.repeat.map.convert=function(a){var b,c=[];for(b=0;b<a.length;++b)c[b]=ga.repeat.map[a[b]]||a[b];return c};ga.hide=function(a,b){ga.hide.data=ga.hide.data||{};ga.hide.data[a]=ga.hide.data[a]||{};ga.hide.data[a][b]=ga.hide.data[a][b]||{};ga.hide.data[a][b].active=1};ga.hide.data={};
ga.hide.update=function(a,b){var c;if(ga.hide.data[a]&&ga.hide.data[a][b])if(ga.hide.data[a][b].hides){if($(b).prop("checked"))for(c in ga.hide.data[a][b].hides)$(c+"-itd").html(" "),$(c).hide();else for(c in ga.hide.data[a][b].hides)$(c+"-itd").html(ga.hide.data[a][b].hides[c]),$(c).show();ga.hhelp.set()}else console.log("ga.hide.update( "+a+" , "+b+" ) error, no hides attached to this hider");else console.log("ga.hide.update( "+a+" , "+b+" ) error, hider has not been defined")};
ga.hide.add=function(a,b,c){ga.hide.data=ga.hide.data||{};ga.hide.data[a]=ga.hide.data[a]||{};ga.hide.data[a][c]=ga.hide.data[a][c]||{};ga.hide.data[a][c].hides=ga.hide.data[a][c].hides||{};ga.hide.data[a][c].hides[b]=$(b+"-itd").html()};ga.directives=function(a,b){ga.directives.data=ga.directives.data||{};ga.directives.data[a]=b};ga.hideifnot=function(a,b){ga.directives.data&&ga.directives.data[b]&&!/^(off|false|0$)/.test(ga.directives.data[b].toLowerCase())||$(a).hide()};ga.data={};
ga.data.nofcrefresh={};function showTooltip(a,b,c,e){$('<div id="rtooltip">'+c+"</div>").css({position:"absolute",top:b+5,left:a+5,border:"1px solid #181616",padding:"2px","background-color":e,color:"white"}).appendTo("body")}ga.data.dataURLtoFile=function(a,b){var c=a.split(",");a=c[0].match(/:(.*?);/)[1];c=atob(c[1]);for(var e=c.length,g=new Uint8Array(e);e--;)g[e]=c.charCodeAt(e);return new File([g],b,{type:a})};
ga.data.create_image_htmltocanvas=function(a){if($("#"+a+"_savetofile").length){var b=$("#"+a+"_div");html2canvas(b.get(0),{background:"#ffffff",onrendered:function(b){b='<a href="'+b.toDataURL("image/png").replace("image/png","image/octet-stream")+'" target="_blank" download="plot.png">plot.png</a>';$("#"+a+"_savetofile_link").html(b)}})}};
ga.data.create_image=function(a,b){if($("#"+a+"_savetofile").length){var c=document.getElementById(a+"_savetofile");b=b.getCanvas().toDataURL("image/png").replace("image/png","image/octet-stream");b=ga.data.dataURLtoFile(b,"plot.png");c.href=URL.createObjectURL(b);$("#"+a+"_savetofile").removeClass("hidden")}};
ga.data.update=function(a,b,c,e){var g=0,f=0,k=0,h=0,d=0,l="#"+a,q=$(l),m="#"+(a+"_output");$(m);var x={},r=m+"_msgs",v=$(r),p,u,w,A,y,B,z;c&&($("#"+a+"_progress").empty(),v.text(""));$.each(b,function(l,n){z=q.find("#"+l);if(z.length)switch(g||(v.text(""),g=1),z.attr("type")){case "plot3d":case "plotly":p="#"+l;ga.plot3dglobal=n.layout;ga.dataplot3dglobal=n.data;ga.plotted3d[a]=0;$(p+"_showcollapse").length&&$(p+"_showcollapse").removeClass("hidden");Plotly.plot(l,n.data,n.layout);ga.showcollapse3d[a]&&
(ga.plotted3d[a]=1,$(p+"_showcollapse").trigger("click"));w=a+":#"+l+":last_value";$("#global_data").data(w,n);break;case "plot2d":p="#"+l;ga.value.plot2d.zstack.reset(p);if(n.data){if(ga.value.set.plot2d(p,n.options),ga.plotglobal=n.options,ga.dataplotglobal=n.data,$.plot(p,n.data,ga.value.get.plot2d.plot_options(p,n.options)),ga.customtooltips[a]){var r=null;$(p).bind("plothover",function(a,b,c){c?r!=c.dataIndex&&(r=c.dataIndex,$("#rtooltip").remove(),c.datapoint[0].toFixed(2),c.datapoint[1].toFixed(2),
c.series.tooltips.length&&showTooltip(c.pageX,c.pageY,c.series.tooltips[c.dataIndex],c.series.color)):($("#rtooltip").remove(),r=null)})}}else $.plot(p,n,ga.value.get.plot2d.plot_options(p));$(p+"_savetofile").length&&$(p+"_savetofile").removeClass("hidden");$(p+"_changescalex").length&&($(p+"_changescalex").removeClass("hidden"),"log"==n.options.xscale?$(p+"_changescalex_message").html("X-log"):$(p+"_changescalex_message").html("X-lin"));$(p+"_changescaley").length&&($(p+"_changescaley").removeClass("hidden"),
"log"==n.options.yscale?$(p+"_changescaley_message").html("Y-log"):$(p+"_changescaley_message").html("Y-lin"));$(p+"_showcollapse").length&&($(p+"_showcollapse").removeClass("hidden"),$(p).show(),ga.plotted2d[a]=1,$(p+"_showcollapse").trigger("click"));if(ga.value.settings[p].selzoom||n.options&&n.options.selection&&n.options.selection.mode&&"xy"==n.options.selection.mode)$(p).on("plotselected",{htag:p,data:n.data?n.data:n,options:n.data?ga.value.get.plot2d.plot_options(p,n.options):ga.value.get.plot2d.plot_options(p)},
function(a,b){1E-5>b.xaxis.to-b.xaxis.from&&(b.xaxis.to=b.xaxis.from+1E-5);1E-5>b.yaxis.to-b.yaxis.from&&(b.yaxis.to=b.yaxis.from+1E-5);ga.value.plot2d.zstack.dopush(a.data.htag,b);$.plot(a.data.htag,a.data.data,$.extend(!0,{},a.data.options,{xaxis:{min:b.xaxis.from,max:b.xaxis.to},yaxis:{min:b.yaxis.from,max:b.yaxis.to}}))}).on("contextmenu",{htag:p,data:n.data?n.data:n,options:n.data?ga.value.get.plot2d.plot_options(p,n.options):ga.value.get.plot2d.plot_options(p)},function(a){a.preventDefault();
var b=ga.value.plot2d.zstack.dopop(a.data.htag);b?$.plot(a.data.htag,a.data.data,$.extend(!0,{},a.data.options,{xaxis:{min:b.xaxis.from,max:b.xaxis.to},yaxis:{min:b.yaxis.from,max:b.yaxis.to}})):$.plot(a.data.htag,a.data.data,a.data.options)});w=a+":#"+l+":last_value";$("#global_data").data(w,n);break;case "bokeh":ga.bokeh.render(a,l,n);break;case "ngl":ga.value.nglshow(a,l,n);break;case "atomicstructure":w=a+":#"+l+":last_value";B=n.file?n.file:n;_jmol_info[l].script="set background ["+ga.colors.background+
"]; set zoomlarge false;set echo top center;echo loading "+B.split("/").pop()+';refresh;load "'+B+'";';ga.set(a+":jsmoladd")&&(_jmol_info[l].script+=ga.set(a+":jsmoladd"));n.script&&(_jmol_info[l].script+=";"+n.script);$("#global_data").data(w,_jmol_info[l].script);$("#"+l).html(Jmol.getAppletHtml("jmolApplet"+l,_jmol_info[l]));break;case "checkbox":case "radio":z.prop("checked",!0);break;case "div":z.html(n);break;case "video":u=$("#"+l);y="<video ";u.attr("data-width")&&(y+=' width="'+u.attr("data-width")+
'"');u.attr("data-height")&&(y+=' height="'+u.attr("data-height")+'"');y+=" controls>";y+='<source src="'+n+'.mp4" type="video/mp4" /><source src="'+n+'.webm" type="video/webm" />';y+="</video>";u.html(y);break;case "image":u=$("#"+l);y="<img ";u.attr("data-width")&&(y+=' width="'+u.attr("data-width")+'"');u.attr("data-height")&&(y+=' height="'+u.attr("data-height")+'"');y+=' src="'+n+'">';u.html(y);break;case "filelink":A='<a href="'+n+'" target="_blank">'+n.split("/").pop()+"</a>";w=a+":#"+l+":last_value";
$("#global_data").data(w,A);$("#"+l+"_filelink").html(A);break;case "filelinkm":w=a+":#"+l+":last_value";A="";$.each(n,function(a,b){A+='<a href="'+b+'" target="_blank">'+b.split("/").pop()+"</a> "});$("#global_data").data(w,A);$("#"+l+"_filelink").html(A);break;default:$("#global_data").data("_append:"+a+"_"+l)?(z.val(z.val()+"\n"+n),z.height(parseFloat(z.prop("scrollHeight")+parseFloat(z.css("borderTopWidth"))+parseFloat(z.css("borderBottomWidth"))))):z.val(n)}else c?"_"==l.charAt(0)?/^_fs_/.test(l)&&
ga.data.nofcrefresh[a]||("_message"==l&&ga.msg.box(n),"_question"==l&&ga.qr.question(a,b),"_question_answered"==l&&ga.qr.answered(a,b),"_question_timeout"==l&&ga.qr.timeout(a,b),/^_getinput/.test(l)&&"_getinput"==l&&ga.valuen.input(a,n),"_textarea"==l&&ga.data.textarea(m,n),"_airavata"==l&&ga.data.airavata(m,n),"_status"==l&&"complete"==n&&c(e,0,0)):(f||(v.append("<p>Unexpected results:</p>"),f=1),v.append("<p>"+l+" => "+n+"</p>")):"_"==l.charAt(0)?/^_fs_/.test(l)&&ga.data.nofcrefresh[a]||($("#_state").data(l,
n),k=1,"_status"==l&&(x.job_status=n),/^_getinput/.test(l)&&"_getinput"==l&&ga.valuen.input(a,n),"_textarea"==l&&ga.data.textarea(m,n),"_airavata"==l&&ga.data.airavata(m,n),"_loginverify"==l&&ga.login.verify(n),"_loginapprove"==l&&ga.login.approve(n)):"-close"==l?h=1:"-close2"==l?d=1:(f||(v.text(""),v.append("<p>Unexpected results:</p>"),g=f=1),v.append("<p>"+l+" => "+n+"</p>"))});ga.value.saveLastValues(a);ga.value.saveLastValue(a,r);$(l+"_progress").empty();k&&syncState();h&&ga.msg.close(1);d&&
ga.msg.close(2);return x};
ga.data.textarea=function(a,b){console.log("ga.data.textarea hmod_out = "+a);var c=a+"_textarea";console.log("ga.data.textarea hmod_out_textarea = "+c);var e=$(c),g=e[0].scrollHeight-e[0].scrollTop===e[0].clientHeight;b||(b="");e.is(":hidden")&&(e.show(),$(c+"_label").show());"__reset__\n"==b.substr(0,10)?e.val(b.substr(10)):e.val(e.val()+b);ga.set("textarea:rows")?ga.data.textarea.h[a]?e.height(ga.data.textarea.h[a]):ga.data.textarea.h[a]=parseFloat(e.prop("clientHeight"))+parseFloat(e.css("borderTopWidth"))+
parseFloat(e.css("borderBottomWidth")):e.height(parseFloat(e.prop("scrollHeight"))+parseFloat(e.css("borderTopWidth"))+parseFloat(e.css("borderBottomWidth")));g&&e.scrollTop(e[0].scrollHeight)};ga.data.textarea.h={};ga.data.airavata=function(a,b){a=$(a+"_airavata");a.is(":hidden")&&a.show();a.html(b)};
ga.sync=function(a,b,c){var e,g=$("#"+b),f;if(g&&ga.sync.data&&ga.sync.data[a]&&ga.sync.data[a][c]){ga.sync.data[a][c][b]=!0;for(e in ga.sync.data[a][c])if(e!=b&&(f=$("#"+e))&&$.isNumeric(f.val())){g.val(f.val());g.change();return}ga.sync.data[a][c]._lastval&&$.isNumeric(ga.sync.data[a][c]._lastval)&&(g.val(ga.sync.data[a][c]._lastval),g.change())}else ga.sync.data=ga.sync.data||{},ga.sync.data[a]=ga.sync.data[a]||{},ga.sync.data[a][c]=ga.sync.data[a][c]||{},ga.sync.data[a][c][b]=!0};
ga.sync.change=function(a,b,c){var e,g=$("#"+b);if(g&&$.isNumeric(g.val())&&ga.sync.data&&ga.sync.data[a]&&ga.sync.data[a][c])for(e in ga.sync.data[a][c]._lastval=g.val(),ga.sync.data[a][c])e!=b&&(a=$("#"+e))&&a.val()!=g.val()&&(a.val(g.val()),a.change())};ga.sync.reset=function(a){var b;if(ga.sync.data&&ga.sync.data[a])for(b in ga.sync.data[a])ga.sync.data[a][b]._lastval&&delete ga.sync.data[a][b]._lastval};ga.valuen={};ga.valuen.data={};ga.valuen.html={};ga.valuen.dflt={};ga.valuen.dflt.data={};
ga.valuen.dflt.html={};ga.valuen.lastload="";
ga.valuen.restore=function(a,b,c){var e="#"+a,g=$(e),f=g.find(":input").get(),k={},h;b=b||ga.valuen.data[a];c=c||ga.valuen.html[a];if(b){$(e+" .field_msg").empty();do{var d=!1;$.each(f,function(){var c,e=$(this);if(e.attr("data-repeater")&&!k[this.name]){k[this.name]=!0;if(this.name&&(b[this.name]||/checkbox|radio/i.test(this.type))){var h=b[this.name];if(/checkbox|radio/i.test(this.type)){var x=e.val();var r=!1;if(h)for(c=0;c<h.length;c++)if(h[c]==x){r=!0;break}e.prop("checked",r)}else e.val(h[0]);
d=!0;ga.repeat.change(a,this.name,!0);f=g.find(":input").get();return!1}b[this.name]||/checkbox|radio/i.test(this.type)||console.warn("ga.valuen.restore() no data found for repeater setting value on "+this.name+" type "+this.type+" to "+h[0])}})}while(d);$.each(f,function(){var c;if(this.name&&!k[this.name]){var e=$(this);if((b[this.name]||/checkbox|radio/i.test(this.type))&&!/button/i.test(this.nodeName)){var d=b[this.name];if(/checkbox|radio/i.test(this.type)){var f=e.val();var g=!1;if(d)for(c=
0;c<d.length;c++)if(d[c]==f){g=!0;break}e.prop("checked",g)}else"file"===this.type?d[0]?$("#"+this.id+"_msg").html(" "+d[0]+" please reload manually (programmatic setting of local files disallowed by browser security)"):e.val(""):e.val(d[0])}else if(/button/i.test(this.nodeName)&&(d=e.attr("data-type"))&&(e=ga.altfile.button.getnames(this.id,d)))for(c=0;c<e.length;++c)b[e[c]]&&ga.altfile.button.addhtml(a,this.id,d,b[e[c]])}});for(h in c)$("#"+h).html(c[h])}};
ga.valuen.restore.dflt=function(a){return ga.valuen.restore(a,ga.valuen.dflt.data[a],ga.valuen.dflt.html[a])};
ga.valuen.save=function(a,b){var c=$("#"+a).find(":input").get();data={};html={};$.each(c,function(){var a=$(this),b=this.name&&!this.disabled,c=a.attr("data-add");if(b){if(this.checked||/select|textarea/i.test(this.nodeName)||/file|email|number|text|hidden|password/i.test(this.type))void 0==data[this.name]&&(data[this.name]=[]),data[this.name].push(a.val());c&&(void 0==html[c]&&(html[c]=[]),html[c].push($("#"+c).html()))}});b?(ga.valuen.dflt.data[a]=data,ga.valuen.dflt.html[a]=html):(ga.valuen.data[a]=
data,ga.valuen.html[a]=html)};
ga.valuen.input=function(a,b){var c=$("#"+a),e=c.find(":input").get(),g={};if(b){do{var f=!1;$.each(e,function(){var k,h=$(this);if(h.attr("data-repeater")&&!g[this.name]){g[this.name]=!0;if(this.name&&(b[this.name]||/checkbox|radio/i.test(this.type))){var d=b[this.name];"[object Array]"!==Object.prototype.toString.call(d)&&(d=[d]);if(/checkbox|radio/i.test(this.type)){var l=h.val();var q=!1;if(d)for(k=0;k<d.length;k++)if(d[k]==l){q=!0;break}h.prop("checked",q)}else h.val(d[0]);f=!0;ga.repeat.change(a,
this.name,!0);e=c.find(":input").get();return!1}b[this.name]||/checkbox|radio/i.test(this.type)||console.warn("ga.valuen.input() no data found for repeater setting value on "+this.name+" type "+this.type+" to "+d[0])}})}while(f);$.each(e,function(){var c;if(this.name&&!g[this.name]){var e=$(this);if((b[this.name]||/checkbox|radio/i.test(this.type))&&!/button/i.test(this.nodeName)){var d=b[this.name];"[object Array]"!==Object.prototype.toString.call(d)&&(d=[d]);if(/checkbox|radio/i.test(this.type)){var f=
e.val();var q=!1;if(d)for(c=0;c<d.length;c++)if(d[c]==f){q=!0;break}e.prop("checked",q)}else"file"===this.type?d[0]&&$("#"+this.id+"_msg").html(" "+d[0]+" please reload manually (programmatic setting of local files disallowed by browser security)"):e.val(d[0])}else if(/button/i.test(this.nodeName)&&(d=e.attr("data-type"))&&(e=ga.altfile.button.getnames(this.id,d),typenamesinput=ga.altfile.button.getnamesinput(this.id,d),e))for(c=0;c<e.length;++c)b[typenamesinput[c]]&&ga.altfile.button.addhtml(a,this.id,
d,b[typenamesinput[c]])}});$.each(b,function(a,b){var c;/^_html_/.test(a)&&(a=a.replace(/^_html_/,""),(c=$("#"+a))&&c.html(b))})}else console.warn("ga.valuen.input( "+a+" ) no data")};ga.valuen.addhtml=function(a){a=$("#"+a);var b=a.find(":input").get(),c="";$.each(b,function(){var a=$(this),b=this.name&&!this.disabled;a=a.attr("data-add");b&&a&&(c+='<input type="hidden" name="_html_'+a+'" value="'+$("#"+a).html()+'">')});a.append(c)};
ga.valuen.reset=function(){ga.valuen.data={};ga.valuen.html={};ga.valuen.dflt={};ga.valuen.dflt.data={};ga.valuen.dflt.html={};ga.valuen.lastload=""};
ga.license=function(a){a=a.split(",");var b=[],c,e=[],g;a.length&&(c="<p>Submitting to this module requires "+(1<a.length?"approved licenses":"an approved license")+" for <em>"+a.join("</em> and <em>")+"</em></p>");for(g in a)if(e.push({id:a[g],label:a[g]+" Management",data:a[g],cb:function(a){return ga.altfile.button.simplecall("license",a)}}),ga.license.data[a[g]]&&ga.license.data[a[g]].status)switch(ga.license.data[a[g]].status){case "approved":break;case "denied":c+="<p>Your license request for <em>"+
a[g]+"</em> has been <strong>denied</strong>.</p>";b.push(a[g]);break;case "pending":c+="<p>Your license request for <em>"+a[g]+"</em> is pending approval.</p>";b.push(a[g]);break;default:console.warn("ga.license() "+a[g]+" unknown status "+ga.license.data[a[g]].status),b.push(a[g])}else b.push(a[g]);return b.length?(ga.msg.box({icon:"warning.png",text:c,buttons:e}),!1):!0};ga.license.data={};
ga.license.get=function(){ga.license.data={};ga.license.url&&$.getJSON(ga.license.url,{tagmode:"any",format:"json",_window:window.name,_logon:$("#_state").data("_logon")}).done(function(a,b,c){a.license&&(ga.license.data=a.license);a.restricted?ga.restricted.show(a.restricted):ga.restricted.hideall()}).fail(function(a,b,c){console.warn("could not get license data")})};
ga.captcha=function(a,b){var c="";$.ajax({url:ga.captcha.url,data:{_window:window.name}}).success(function(e){e=$.parseJSON(e);e.error?ga.msg.box({icon:"toast.png",text:e.error}):(c='<img src="data:image/png;base64,'+e.captcha+'"><form id="sys_captcha"><label for="sys_captcha_text">Verify </label><input id="sys_captcha_text" class="help_link" type="text" maxlength="6" size="6" required><span class="help">Enter the 6 character alphanumeric code shown in the image and then press submit</span><input id="sys_captcha_id" type="hidden" value="'+
e.id+'"></form>',ga.msg.box({text:c,eval:"ga.hhelp.reset();$('#sys_captcha').on('keyup keypress', function(e) { var code = e.keyCode || e.which;  if (code  == 13) { e.preventDefault(); return false; }});",buttons:[{id:"submit",label:"Submit",cb:ga.captcha.verify,data:{cb:a,data:b}}]}))}).error(function(a){ga.msg.box({icon:"toast.png",text:"Error contacting server"})})};
ga.captcha.verify=function(a){$.ajax({url:ga.captcha.url_verify,data:{_window:window.name,captcha:$("#sys_captcha_text").val(),id:$("#sys_captcha_id").val()}}).success(function(b){b=$.parseJSON(b);if(b.error)ga.msg.box({icon:"toast.png",text:b.error});else if(b.success)a.cb(a.data);else return ga.captcha(a.cb,a.data)}).error(function(a){ga.msg.box({icon:"toast.png",text:"Error contacting server"})})};
ga.register=function(a){a=a.split(",");var b=[],c,e=[],g;a.length&&(c="<p>Submitting to this module requires "+(1<a.length?"approved registers":"an approved register")+" for <em>"+a.join("</em> and <em>")+"</em></p>");for(g in a)if(e.push({id:a[g],label:a[g]+" Management",data:a[g],cb:function(a){return ga.altfile.button.simplecall("register",a)}}),ga.register.data[a[g]]&&ga.register.data[a[g]].status)switch(ga.register.data[a[g]].status){case "approved":break;case "denied":c+="<p>Your register request for <em>"+
a[g]+"</em> has been <strong>denied</strong>.</p>";b.push(a[g]);break;case "pending":c+="<p>Your register request for <em>"+a[g]+"</em> is pending approval.</p>";b.push(a[g]);break;default:console.warn("ga.register() "+a[g]+" unknown status "+ga.register.data[a[g]].status),b.push(a[g])}else b.push(a[g]);return b.length?(ga.msg.box({icon:"warning.png",text:c,buttons:e}),!1):!0};ga.register.data={};
ga.register.get=function(){ga.register.data={};ga.register.url&&$.getJSON(ga.register.url,{tagmode:"any",format:"json",_window:window.name,_logon:$("#_state").data("_logon")}).done(function(a,b,c){a.register&&(ga.register.data=a.register);a.restricted?ga.restricted.show(a.restricted):ga.restricted.hideall()}).fail(function(a,b,c){console.warn("could not get register data")})};ga.calc={};ga.calc.data={};ga.calc.str_atom_numeric="(?:(?:-?[1-9][0-9]*)|(?:-?0))?(?:[.][0-9]+)?(?:[eE][-+]?[0-9]+)?";
ga.calc.str_atom_id="[A-Za-z][A-Za-z0-9_:]*";ga.calc.str_function="(?:abs\\(|acos\\(|asin\\(|atan\\(|atan2\\(|ceil\\(|cos\\(|exp\\(|floor\\(|log\\(|max\\(|min\\(|pow\\(|random\\(|round\\(|sin\\(|sqrt\\(|tan\\(|-)";ga.calc.str_function_paren="(?:abs\\(|acos\\(|asin\\(|atan\\(|atan2\\(|ceil\\(|cos\\(|exp\\(|floor\\(|log\\(|max\\(|min\\(|pow\\(|random\\(|round\\(|sin\\(|sqrt\\(|tan\\()";ga.calc.str_function_no_paren="-";ga.calc.str_binary="[-,+*/^]";ga.calc.str_open_paren="\\(";
ga.calc.str_close_paren="\\)";ga.calc.str_paren="[()]";ga.calc.is_atom_numeric=RegExp("^"+ga.calc.str_atom_numeric+"$");ga.calc.is_atom_id=RegExp("^"+ga.calc.str_atom_id+"$");ga.calc.is_function=RegExp("^"+ga.calc.str_function+"$");ga.calc.is_function_paren=RegExp("^"+ga.calc.str_function_paren+"$");ga.calc.is_function_no_paren=RegExp("^"+ga.calc.str_function_no_paren+"$");ga.calc.is_binary=RegExp("^"+ga.calc.str_binary+"$");ga.calc.is_open_paren=RegExp("^"+ga.calc.str_open_paren+"$");
ga.calc.is_close_paren=RegExp("^"+ga.calc.str_close_paren+"$");ga.calc.is_paren=RegExp("^"+ga.calc.str_paren+"$");ga.calc.is_atom=RegExp("^("+ga.calc.str_atom_id+"|"+ga.calc.str_atom_numeric+")$");ga.calc.inc_paren=RegExp("^("+ga.calc.str_paren+"|"+ga.calc.str_function_paren+")$");ga.calc.precedence={"^":4,"*":5,"/":5,"+":6,"-":6,",":8};
ga.calc.register=function(a,b,c){ga.calc.data[a]=ga.calc.data[a]||{};ga.calc.data[a].calc=ga.calc.data[a].calc||{};ga.calc.data[a].calc[b]={};ga.calc.data[a].calc[b].calc=c;ga.calc.data[a].calc[b].tokens=ga.calc.tokens(c);ga.calc.data[a].calc[b].tokens._error?ga.msg.box({icon:"toast.png",text:"Module field calc internal error (tokens): "+ga.calc.data[a].calc[b].tokens._error+" in calc field id "+b}):(ga.calc.repeatertokens(a,b),ga.calc.data[a].calc[b].dependents=ga.calc.dependents(a,b),99<ga.calc.depthofdeps(a,
b)?ga.msg.box({icon:"toast.png",text:"Module field calc internal error: maximum recursion depth found in calc field id "+b}):(ga.calc.data[a].calc[b].tree=ga.calc.mktree(ga.calc.data[a].calc[b].tokens),ga.calc.data[a].calc[b].tree._error?ga.msg.box({icon:"toast.png",text:"Module field calc internal error (tree): "+ga.calc.data[a].calc[b].tree._error+" in calc field id "+b}):ga.calc.install(a,b)))};
ga.calc.repeatertokens=function(a,b){if(/-/.test(b)){var c=b.split("-");if(/\d+/.test(c[c.length-1])){var e=c.slice(0,c.length-2).join(":")+":";c=":"+c[c.length-1]}else e=c.slice(0,c.length-1).join(":")+":",c="";for(i in ga.calc.data[a].calc[b].tokens)ga.calc.is_atom_id.test(ga.calc.data[a].calc[b].tokens[i])&&!$("#"+ga.calc.data[a].calc[b].tokens[i]).length&&(ga.calc.data[a].calc[b].tokens[i]=e+ga.calc.data[a].calc[b].tokens[i]+c)}};
ga.calc.depthofdeps=function(a,b,c){var e,g=0;c=c||0;ga.calc.data[a].calc[b].dependents&&c++;if(99<c)return c;for(e=0;e<ga.calc.data[a].calc[b].dependents.length;++e)if(ga.calc.data[a].calc[ga.calc.data[a].calc[b].dependents[e]]){var f=ga.calc.depthofdeps(a,ga.calc.data[a].calc[b].dependents[e],c);g<f&&(g=f)}return c+g};
ga.calc.dependents=function(a,b){var c,e=[];for(c in ga.calc.data[a].calc[b].tokens)ga.calc.is_atom_id.test(ga.calc.data[a].calc[b].tokens[c])&&e.push(ga.calc.data[a].calc[b].tokens[c]);return e};ga.calc.install=function(a,b){for(var c in ga.calc.data[a].calc[b].dependents)$("#"+ga.calc.data[a].calc[b].dependents[c].replace(/:/g,"-")).on("change",function(){ga.calc.process(a,b)})};
ga.calc.process=function(a,b){a=ga.calc.evaltree(jQuery.extend(!0,{},ga.calc.data[a].calc[b].tree));a._error?ga.msg.box({icon:"toast.png",text:"Module field calc internal error: "+a._error+" in calc field id "+b}):$("#"+b).val(a).trigger("change")};
ga.calc.tokens=function(a){var b=[],c=[],e=RegExp("^("+ga.calc.str_function_paren+"|"+ga.calc.str_atom_id+"|"+ga.calc.str_paren+"|"+ga.calc.str_atom_numeric+"|"+ga.calc.str_function_no_paren+")"),g=RegExp("^("+ga.calc.str_binary+"|"+ga.calc.str_close_paren+")"),f=500;a=a.replace(/\s+/g,"");c.push(0);do{if(0<c.length&&c[c.length-1]){var k=g.exec(a);if(!k)return{_error:"Invalid token found "+a};if(ga.calc.is_close_paren.test(k[0])){if(!c.length)return{_error:"Invalid closing parenthesis "+a};c.pop();
c.pop();c.push(1)}else c[c.length-1]=0}else{k=e.exec(a);if(!k)return{_error:"Invalid token found "+a};if(ga.calc.is_atom.test(k[0]))c[c.length-1]=1;else if(ga.calc.is_open_paren.test(k[0]))c.push(0);else if(ga.calc.is_close_paren.test(k[0])){if(!c.length)return{_error:"Invalid closing parenthesis "+a};c.pop();c.pop();c.push(1)}else ga.calc.is_function_paren.test(k[0])&&c.push(0)}a=a.substring(k[0].length);b.push(k[0])}while(k&&k.length&&a.length&&0<--f);return 0>=f?{_error:"maximum token limit of 500 reached"}:
b};ga.calc.parensub=function(a){for(var b=1,c={a:[]},e=1;e<a.length;++e){if(")"==a[e]&&(b--,0==b))return c.newofs=e,c;c.a.push(a[e]);/\($/.test(a[e])&&b++}return{_error:"Closing parenthesis error"}};
ga.calc.mktree=function(a,b){for(var c=[],e=null,g,f,k=0;k<a.length;++k){token=a[k];if(ga.calc.is_function_paren.test(token)){g=ga.calc.parensub(a.slice(k));if(g._error)return g;k+=g.newofs;token={op:token,args:[g=ga.calc.mktree(g.a)]};f=1;if(g._error)return g}else if(ga.calc.is_open_paren.test(token)){g=ga.calc.parensub(a.slice(k));if(g._error)return g;k+=g.newofs;token=ga.calc.mktree(g.a);if(token._error)return token;f=1}else f=0;f||ga.calc.is_atom.test(token)?(c.push(token),e&&(b?ga.calc.precedence[e]<
ga.calc.precedence[b.op]?(console.log("replace 2nd arg"),b.args[1]={op:e,args:[b.args[1],token]}):(console.log("replace parent object"),b={op:e,args:[b,token]}):(b={op:e,args:c},e=null,c=[]))):ga.calc.is_binary.test(token)&&(e=token)}!b&&c.length&&(b={op:"()",args:c});return b};
ga.calc.arraytovals=function(a){var b;if(a.constructor===Array)for(b=0;b<a.length;++b)a[b]=Number(ga.calc.is_atom_id.test(a[b])?$("#"+a[b].replace(/:/g,"-")).val():a[b]);else a=Number(ga.calc.is_atom_id.test(a)?$("#"+a.replace(/:/g,"-")).val():a);return a};
ga.calc.evaltree=function(a){var b,c;var e=1;if(!a)return{_error:"no object in ga.calc.evaltree"};if(a._error)return a;if(!a.op)return{_error:"no op in object in ga.calc.evaltree"};if(!a.args)return{_error:"no args in object in ga.calc.evaltree"};if(1>a.args.length||2<a.args.length)return{_error:"args incorrect length in object in ga.calc.evaltree"};(b=2==a.args.length)&&"undefined"==typeof a.args[1]&&(b=0);"undefined"==typeof a.args[0]&&(e=0);e&&a.args[0].op&&(a.args[0]=ga.calc.evaltree(a.args[0]));
b&&a.args[1].op&&(a.args[1]=ga.calc.evaltree(a.args[1]));e&&(a.args[0]=ga.calc.arraytovals(a.args[0]),b&&(a.args[1]=ga.calc.arraytovals(a.args[1])));e=e&&a.args[0].constructor===Array;if(b){var g=a.args[1].constructor===Array;var f=e||g;if(c=e&&g)if(a.args[0].length<a.args[1].length){var k=a.args[0];var h=a.args[1];var d=1}else k=a.args[1],h=a.args[0],d=0;else if(f){h=a.args[e?0:1];var l=a.args[e?1:0]}}switch(a.op){case ",":f=e?a.args[0]:[a.args[0]];b&&"undefined"!=typeof a.args[1]&&(f=f.concat(g?
a.args[1]:[a.args[1]]));break;case "()":b?(f=e?a.args[0]:[a.args[0]],b&&a.args[1]&&(f=f.concat(g?a.args[1]:[a.args[1]]))):f=a.args[0];break;case "+":if(!b)return{_error:"operator : "+a.op+" is binary and only has one argument"};if(f)if(f=h,c)for(b=0;b<k.length;++b)f[b]+=k[b];else for(b=0;b<h.length;++b)f[b]+=l;else f=a.args[0]+a.args[1];break;case "*":if(!b)return{_error:"operator : "+a.op+" is binary and only has one argument"};if(f)if(f=h,c)for(b=0;b<k.length;++b)f[b]*=k[b];else for(b=0;b<h.length;++b)f[b]*=
l;else f=a.args[0]*a.args[1];break;case "-":if(!b)return{_error:"operator : "+a.op+" is binary and only has one argument"};if(f)if(c){f=a.args[0];for(b=0;b<k.length;++b)f[b]-=a.args[1][b];if(d)for(b=a.args[0].length;b<a.args[1].length;++b)f.push(-a.args[1][b]);else for(b=a.args[1].length;b<a.args[0].length;++b)f.push(a.args[0][b])}else if(e)for(f=a.args[0],b=0;b<a.args[0].length;++b)f[b]-=a.args[1];else for(f=[],b=0;b<a.args[1].length;++b)f.push(a.args[0]-a.args[1][b]);else f=a.args[0]-a.args[1];
break;case "/":if(!b)return{_error:"operator : "+a.op+" is binary and only has one argument"};if(f)if(c){f=a.args[0];for(b=0;b<k.length;++b)f[b]/=a.args[1][b];if(d)for(b=a.args[0].length;b<a.args[1].length;++b)f.push(0);else for(b=a.args[1].length;b<a.args[0].length;++b)f.push(a.args[0][b]/0)}else if(e)for(f=a.args[0],b=0;b<a.args[0].length;++b)f[b]/=a.args[1];else for(f=[],b=0;b<a.args[1].length;++b)f.push(a.args[0]/a.args[1][b]);else f=a.args[0]/a.args[1];break;case "^":if(!b)return{_error:"operator : "+
a.op+" is binary and only has one argument"};if(f)if(c){f=a.args[0];for(b=0;b<k.length;++b)f[b]=Math.pow(f[b],a.args[1][b]);if(d)for(b=a.args[0].length;b<a.args[1].length;++b)f.push(0);else for(b=a.args[1].length;b<a.args[0].length;++b)f.push(1)}else if(e)for(f=a.args[0],b=0;b<a.args[0].length;++b)f[b]=pow(f[b],a.args[1]);else for(f=[],b=0;b<a.args[1].length;++b)f.push(pow(a.args[0],a.args[1][b]));else f=Math.pow(a.args[0],a.args[1]);break;case "abs(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};
f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.abs(f[b]);else f=Math.abs(a.args[0]);break;case "acos(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.acos(f[b]);else f=Math.acos(a.args[0]);break;case "asin(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.asin(f[b]);else f=Math.asin(a.args[0]);break;case "atan(":if(b)return{_error:"operator : "+
a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.atan(f[b]);else f=Math.atan(a.args[0]);break;case "ceil(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.ceil(f[b]);else f=Math.ceil(a.args[0]);break;case "cos(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.cos(f[b]);else f=Math.cos(a.args[0]);
break;case "exp(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.exp(f[b]);else f=Math.exp(a.args[0]);break;case "floor(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.floor(f[b]);else f=Math.floor(a.args[0]);break;case "log(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=
Math.log(f[b]);else f=Math.log(a.args[0]);break;case "random(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.random();else f=Math.random();break;case "round(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.round(f[b]);else f=Math.round(a.args[0]);break;case "sin(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};
f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.sin(f[b]);else f=Math.sin(a.args[0]);break;case "sqrt(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.sqrt(f[b]);else f=Math.sqrt(a.args[0]);break;case "tan(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=a.args[0];if(e)for(b=0;b<f.length;++b)f[b]=Math.tan(f[b]);else f=Math.tan(a.args[0]);break;case "max(":if(b)return{_error:"operator : "+
a.op+" has 2 arguments but only accepts one"};f=e?Math.max.apply(null,a.args[0]):a.args[0];break;case "min(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};f=e?Math.min.apply(null,a.args[0]):a.args[0];break;case "atan2(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};if(!e)return{_error:"operator : "+a.op+"  needs the first argument to be an even sized array"};f=[];for(b=0;b<a.args[0].length;b+=2)f.push(Math.atan2(a.args[0][b],a.args[0][b+
1]));break;case "pow(":if(b)return{_error:"operator : "+a.op+" has 2 arguments but only accepts one"};if(!e)return{_error:"operator : "+a.op+"  needs the first argument to be an even sized array"};f=[];for(b=0;b<a.args[0].length;b+=2)f.push(Math.pow(a.args[0][b],a.args[0][b+1]));1==f.length&&(f=f[0]);break;default:return{_error:"operator : "+a.op+" unknown or unsupported"}}return f};ga.bokeh={};ga.bokeh.data={};
ga.bokeh.getdata=function(a,b){a={};b=b.split(/\r?\n/);var c=b.length,e,g=0;for(e=0;e<c;++e)if(g||-1!==b[e].indexOf("var docs_json ="))if(!g)g=1,a.docs_json=$.parseJSON(b[e].replace(/^\s*var\s+docs_json\s+=\s+/,"").replace(/(^'|('|);$)/g,""));else if(1==g&&-1!==b[e].indexOf("var render_items =")){a.render_items=$.parseJSON(b[e].replace(/^\s*var\s+render_items\s+=\s+/,"").replace(/;$/,""));break}return a};
ga.bokeh.render=function(a,b,c){c=ga.bokeh.getdata(b,c);a+="_output";ga.bokeh.savedata(a,b,c);ga.bokeh.renderdata(a,b)};
ga.bokeh.renderdata=function(a,b){var c,e="";if(ga.bokeh.data[a]&&ga.bokeh.data[a][b]&&ga.bokeh.data[a][b].docs_json&&ga.bokeh.data[a][b].render_items){var g=ga.bokeh.data[a][b].render_items.length;for(c=0;c<g;++c)e+='<div class="bk-root"><div class="bk-plotdiv" id="'+ga.bokeh.data[a][b].render_items[c].elementid+'"></div></div>';$("#"+b).html(e);Bokeh.embed.embed_items(ga.bokeh.data[a][b].docs_json,ga.bokeh.data[a][b].render_items)}};
ga.bokeh.savedata=function(a,b,c){ga.bokeh.data[a]=ga.bokeh.data[a]||{};ga.bokeh.data[a][b]=c};ga.bokeh.reset=function(a,b){ga.bokeh.data[a]&&ga.bokeh.data[a][b]&&(ga.bokeh.data[a][b]={},$("#"+b).empty())};ga.grid={};ga.grid.rc=function(a,b,c,e){var g="";a&&c&&a<c-1?g+="grid-row-start:"+a+";grid-row-end:"+c+";":a&&(g+="grid-row:"+a+";");b&&e&&b<e-1?g+="grid-column-start:"+b+";grid-column-end:"+e+";":b&&(g+="grid-column:"+b+";");return g};
ga.grid.rcs=function(a,b,c,e){return'style="'+ga.grid.rc(a,b,c,e)+'"'};ga.grid.drcs=function(a,b,c,e,g,f){g=(g||"")+ga.grid.rc(a,b,c,e);return f?'<div class="'+f+'" style="'+g+'">':'<div style="'+g+'">'};ga.grid.init=function(){return{row:0,col:1}};ga.grid.newrow=function(a){a.row++;a.col=1};
ga.grid.next=function(a,b,c,e){a=a||{row:1,col:1};if(b){a.col=b[0]?b[0]:a.col;var g=b[1]?b[1]+a.col:a.col;a.row=b[2]?b[2]:a.row;var f=b[3]?b[3]+a.row:a.row}else g=a.col,f=a.row;b=a.col;a.col=g+1;return ga.grid.drcs(a.row,b,f,g,c,e)};ga.grid.nextstyle=function(a,b,c){c=c||"";a=a||{row:1,col:1};if(b){a.col=b[0]?b[0]:a.col;var e=b[1]?b[1]+a.col:a.col;a.row=b[2]?b[2]:a.row;var g=b[3]?b[3]+a.row:a.row}else e=a.col,g=a.row;b=a.col;a.col=e+1;return ga.grid.rc(a.row,b,g,e,c)+c};ga.qr={};ga.qr.openq={};
ga.qr.question=function(a,b){a="";var c,e="",g="",f=[],k={};b._uuid||(e+="no _uuid in received data. ");b._msgid||(e+="no _msgid in received data. ");b._question||(e+="no _question in received data. ");b._question.fields||(e+="no _question:fields in received data. ");if(e.length)return ga.qr.rerror(b,e);b._question.title&&(a+="<h3>"+b._question.title+"</h3>");b._question.text&&(a+=b._question.text);var h=b._uuid+"-"+b._msgid;if(b._question.grid){ga.grid.align=ga.grid.align||"left";var d="display:grid;grid-gap:";
var l=ga.grid.init();if("object"===typeof b._question.grid){b._question.grid.colwidths?"object"!==typeof b._question.grid.colwidths&&(e+=" _question:grid:colwidths specified, but it is not an array."):e+=" _question:grid specified, but it is not a number and colwidths not defined.";if(e.length)return ga.qr.rerror(b,e);d=b._question.grid.gap?d+b._question.grid.gap:d+"10px";d+=";grid-template-columns:";for(c=0;c<b._question.grid.colwidths.length;++c)d+=b._question.grid.colwidths[c]+"fr "}else for(d+=
"10px;grid-template-columns:auto ",2>b._question.grid&&(b._question.grid=2),c=1;c<b._question.grid;++c)d+=" auto";a+='<form id="'+h+'" style="'+(d+";")+'">';for(c=row_start=0;c<b._question.fields.length;++c)if(d=b._question.fields[c],d.id||(e+="No id in field "+c+". "),/^[A-Za-z][A-Za-z0-9_]*$/.test(d.id)||(e+="Invalid id for field "+c+' with id value "'+d.id+'". Only alpha in first character and alphanumeric and underscores subsequently allowed.'),d.type||(e+="No type in field "+c+". "),d.id&&d.type){var q=
"text-align:"+(d.grid&&d.grid.align?d.grid.align:ga.grid.align)+";";k[d.id]&&(e+="Duplicate id in _question fields:"+d.id+". ");k[d.id]=1;if(d.help){var m=' class="help_link"';help_span='<span class="help">'+d.help+"</span>"}else help_span=m="";switch(d.type){case "label":ga.grid.newrow(l);a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+"<label"+m+">";d.label&&(a+=d.label);a+="</label>"+help_span+"</div>";break;case "file":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+
d.id+'"'+m+">"+d.label+"</label></div>");a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<input type="file" id="'+d.id+'" name="'+d.id+'[]"'+m;d.required&&(a+=" required");d.multiple&&(a+=" multiple");d.accept&&(a+=' accept="'+d.accept+'"');a+=">"+help_span+"</div>";break;case "lrfile":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<input type="file" id="'+d.id+'" name="'+
d.id+'[]" data-add="'+d.id+'_altval"'+m;d.required&&(a+=" required");d.multiple&&(a+=" multiple");d.accept&&(a+=' accept="'+d.accept+'"');a+=">"+help_span+' or <button id="'+d.id+'_button" name="'+d.id+'_button" data-type="lrfile"'+m+'><span class="buttontext">Browse server</span></button>'+help_span+'<span id="'+d.id+'_altval"></span><input type="hidden" name="_selaltval_'+d.id+'" value="'+d.id+'_altval"</input></div>';g+='ga.altfile("'+h+'","'+d.id+'","'+d.id+'_altval" );$( "#'+h+'" ).change( function(){ $( "#'+
d.id+'_altval" ).html( "<i>Local</i>: " + $( "#'+d.id+'" ).val().replace(/^C:.fakepath./,""));});ga.altfile.button( "'+h+'","'+d.id+'","'+d.label+'","rfile",function(v){ga.altfile.button.lrfile(v,"'+h+'","'+d.id+'")}';d.required&&(g+=',"lrfile"');g+=");";g+='$("#'+d.id+'_button").on("click",function(){return ga.altfile.button.call("'+h+'","'+d.id+'");});';break;case "text":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");
a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<input type="text" id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.maxlength&&(a+=' maxlength="'+d.maxlength+'"');d.size&&(a+=' size="'+d.size+'"');a+=">"+help_span+"</div>";break;case "integer":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");
a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<input type="number" id="'+d.id+'" step="1" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.min&&(a+=' min="'+d.min+'"');d.max&&(a+=' max="'+d.max+'"');a+=">"+help_span+"</div>";break;case "float":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");a+=ga.grid.next(l,
d.grid?d.grid.data:null,q)+'<input type="number" id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d.required&&(a+=" required");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.step&&(a+=' step="'+d.step+'"');d.min&&(a+=' min="'+d.min+'"');d.max&&(a+=' max="'+d.max+'"');a+=">"+help_span+"</div>";break;case "textarea":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+
m+">"+d.label+"</label></div>");a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<textarea id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");a+=" readonly";d.fontfamily&&(a+=' style="font-family: '+d.fontfamily+';"');d.cols&&(a+=" cols="+d.cols);d.rows&&(a+=" rows="+d.rows);a+=">";d["default"]&&(a+=d["default"]);a+="</textarea>"+help_span+"</div>";break;case "checkbox":ga.grid.newrow(l);d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");
a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<input type="checkbox" id="'+d.id+'" name="'+d.id+'"'+m;d.checked&&(a+=" checked");d.readonly&&(a+=" readonly");a+=">"+help_span+"</div>";break;case "listbox":ga.grid.newrow(l);if(d.header){d.label&&ga.grid.next(l,d.grid?d.grid.label:null);a+='<div style="';if(d.fontfamily||d.fontsize)d.fontfamily&&(a+="font-family:"+d.fontfamily+";"),d.fontsize&&(a+="font-size:"+d.fontsize+";");a+=ga.grid.nextstyle(l,d.grid?d.grid.data:null,q);a+='"';d.width&&(d.header=
d.header.padEnd(d.width));d.header=d.header.replace(/ /g,"&nbsp;");a+=">"+d.header+"</div>";ga.grid.newrow(l)}d.label&&(a+=ga.grid.next(l,d.grid?d.grid.label:null,q)+'<label for="'+d.id+'"'+m+">"+d.label+"</label></div>");a+=ga.grid.next(l,d.grid?d.grid.data:null,q)+'<select id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.fontfamily&&(a+=' style="font-family: '+d.fontfamily+';"');d.size&&(a+=" size="+d.size);d.multiple&&(a+=" multiple");a+=">";if(!d.values){e+="No values for listbox "+
d.id+". ";break}if(d.returns){if(d.returns&&d.returns.length!=d.values.length){e+="Listbox values length ("+d.values.length+") does not equal return length ("+d.returns.length+") for listbox "+d.id+". ";break}for(m=0;m<d.values.length;++m)a+='<option value="'+d.returns[m]+'">'+d.values[m].replace(/ /g,"&nbsp")+"</option>"}else for(m=0;m<d.values.length;++m)a+='<option value="'+m+'">'+d.values[m].replace(/ /g,"&nbsp")+"</option>";d["default"]&&(g+='$("#'+d.id+" option[value='"+d["default"]+'\']").attr("selected", "true");');
a+="</select>"+help_span+"</div>";break;default:e+="Unknown or currently unsupported field:type "+d.type+". "}}a+="</form>"}else{a+='<form id="'+h+'"><table>';for(c=0;c<b._question.fields.length;++c)if(d=b._question.fields[c],d.id||(e+="No id in field "+c+". "),/^[A-Za-z][A-Za-z0-9_]*$/.test(d.id)||(e+="Invalid id for field "+c+' with id value "'+d.id+'". Only alpha in first character and alphanumeric and underscores subsequently allowed.'),d.type||(e+="No type in field "+c+". "),d.id&&d.type)switch(k[d.id]&&
(e+="Duplicate id in _question fields:"+d.id+". "),k[d.id]=1,d.help?(m=' class="help_link"',l=' class="highlight help_link"',help_span='<span class="help">'+d.help+"</span>"):(m="",l=' class="highlight"',help_span=""),d.type){case "label":a+="<tr><td colspan=2><label"+m+">";d.label&&(a+=d.label);a+="</label>"+help_span+"</td></tr>";break;case "file":a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><input type="file" id="'+d.id+'" name="'+d.id+'[]"'+m;d.required&&
(a+=" required");d.multiple&&(a+=" multiple");d.accept&&(a+=' accept="'+d.accept+'"');a+=">"+help_span+"</td></tr>";break;case "lrfile":a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><input type="file" id="'+d.id+'" name="'+d.id+'[]" data-add="'+d.id+'_altval"'+m;d.required&&(a+=" required");d.multiple&&(a+=" multiple");d.accept&&(a+=' accept="'+d.accept+'"');a+=">"+help_span+' or <button id="'+d.id+'_button" name="'+d.id+'_button" data-type="lrfile"'+m+
'><span class="buttontext">Browse server</span></button>'+help_span+'</td><td><span id="'+d.id+'_altval"></td></span><input type="hidden" name="_selaltval_'+d.id+'" value="'+d.id+'_altval"</input></td></tr>';g+='ga.altfile("'+h+'","'+d.id+'","'+d.id+'_altval" );$( "#'+h+'" ).change( function(){ $( "#'+d.id+'_altval" ).html( "<i>Local</i>: " + $( "#'+d.id+'" ).val().replace(/^C:.fakepath./,""));});ga.altfile.button( "'+h+'","'+d.id+'","'+d.label+'","rfile",function(v){ga.altfile.button.lrfile(v,"'+
h+'","'+d.id+'")}';d.required&&(g+=',"lrfile"');g+=");";g+='$("#'+d.id+'_button").on("click",function(){return ga.altfile.button.call("'+h+'","'+d.id+'");});';break;case "text":a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><input type="text" id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.maxlength&&(a+=' maxlength="'+d.maxlength+
'"');d.size&&(a+=' size="'+d.size+'"');a+=">"+help_span+"</td></tr>";break;case "integer":a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><input type="number" id="'+d.id+'" step="1" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.min&&(a+=' min="'+d.min+'"');d.max&&(a+=' max="'+d.max+'"');a+=">"+help_span+"</td></tr>";break;case "float":a+=
"<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><input type="number" id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.readonly&&(a+=" readonly");d.required&&(a+=" required");d["default"]&&(a+=' value="'+d["default"]+'"');d.pattern&&(a+=' pattern="'+d.pattern+'"');d.step&&(a+=' step="'+d.step+'"');d.min&&(a+=' min="'+d.min+'"');d.max&&(a+=' max="'+d.max+'"');a+=">"+help_span+"</td></tr>";break;case "textarea":a+="<tr><td>";d.label&&(a+='<label for="'+
d.id+'"'+m+">"+d.label+"</label>");a+='</td><td><textarea id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");a+=" readonly";d.fontfamily&&(a+=' style="font-family: '+d.fontfamily+';"');d.cols&&(a+=" cols="+d.cols);d.rows&&(a+=" rows="+d.rows);a+=">";d["default"]&&(a+=d["default"]);a+="</textarea>"+help_span+"</td></tr>";break;case "checkbox":a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+l+">"+d.label+"</label>");a+='</td><td><input type="checkbox" id="'+d.id+'" name="'+d.id+'"'+m;
d.checked&&(a+=" checked");d.readonly&&(a+=" readonly");a+=">"+help_span+"</td></tr>";break;case "listbox":if(d.header){a+="<tr><td colspan=2";if(d.fontfamily||d.fontsize)a+=' style="',d.fontfamily&&(a+="font-family:"+d.fontfamily+";"),d.fontsize&&(a+="font-size:"+d.fontsize+";"),a+='"';d.width&&(d.header=d.header.padEnd(d.width));d.header=d.header.replace(/ /g,"&nbsp;");a+=">"+d.header+"</td></tr>"}a+="<tr><td>";d.label&&(a+='<label for="'+d.id+'"'+l+">"+d.label+"</label>");a+="</td>";a=d.size&&
1<d.size?a+"</tr><tr><td colspan=2>":a+"<td>";a+='<select id="'+d.id+'" name="'+d.id+'"'+m;d.required&&(a+=" required");d.fontfamily&&(a+=' style="font-family: '+d.fontfamily+';"');d.size&&(a+=" size="+d.size);d.multiple&&(a+=" multiple");a+=">";if(!d.values){e+="No values for listbox "+d.id+". ";break}if(d.returns){if(d.returns&&d.returns.length!=d.values.length){e+="Listbox values length ("+d.values.length+") does not equal return length ("+d.returns.length+") for listbox "+d.id+". ";break}for(m=
0;m<d.values.length;++m)a+='<option value="'+d.returns[m]+'">'+d.values[m].replace(/ /g,"&nbsp")+"</option>"}else for(m=0;m<d.values.length;++m)a+='<option value="'+m+'">'+d.values[m].replace(/ /g,"&nbsp")+"</option>";d["default"]&&(g+='$("#'+d.id+" option[value='"+d["default"]+'\']").attr("selected", "true");');a+="</select>"+help_span+"</td></tr>";break;default:e+="Unknown or currently unsupported field:type "+d.type+". "}a+="</table></form>"}if(b._question.buttons&&b._question.buttons.length)for(c=
0;c<b._question.buttons.length;++c)switch(d=b._question.buttons[c],typeof d){case "string":bid=d.replace(/\W/g,"").toLowerCase();k[bid]&&(e+="Duplicate id in _question fields & buttons:"+bid+". ");k[bid]=1;f.push({id:bid,label:d,cb:ga.qr.cb,adata:[b,bid,d.skiprequired?0:1]});break;case "object":!d.id&&d.label&&(d.id=d.label.replace(/\W/g,"").toLowerCase());d.id?(k[d.id]&&(e+="Duplicate id in _question fields & buttons:"+d.id+". "),k[d.id]=1,d.id!=d.id.replace(/\W/g,"")&&(e+="Buttons array object entry "+
(c+1)+" id is not pure alphanumeric. ")):e+="Buttons array object entry "+(c+1)+" does not have an id. ";d.label||(e+="Buttons array object entry "+(c+1)+" does not have a label. ");e.length||(f.push({id:d.id,label:d.label,cb:ga.qr.cb,adata:[b,d.id,d.skiprequired?0:1]}),d.help&&(f[f.length-1].help=d.help));break;default:e+="Buttons array entry "+(c+1)+" unknown type: "+typeof d+". "}else bid="ok",k[bid]&&(e+="Duplicate id in _question fields & buttons:"+bid+". "),k[bid]=1,bid="cancel",k[bid]&&(e+=
"Duplicate id in _question fields & buttons:"+bid+". "),k[bid]=1,f=[{id:"ok",label:"OK",cb:ga.qr.cb,adata:[b,"ok",1]},{id:"cancel",label:"Cancel",cb:ga.qr.cb,adata:[b,"cancel",0]}];if(e.length)return ga.qr.rerror(b,e);ga.qr.openq[h]="open";ga.msg.box({icon:b._question.icon?b._question.icon:"question.png",noclose:1,closeif:1,text:a+"<p></p>",eval:'$("#'+h+'").on("keyup keypress", function(e) { var code = e.keyCode || e.which;  if (code  == 13) { e.preventDefault(); return false; }});'+g,buttons:f,
ptext:"<p></p>"},0,2)};
ga.qr.cb=function(a,b,c){var e=a._uuid+"-"+a._msgid;if(ga.qr.openq[e])switch(ga.qr.openq[e]){case "open":break;case "answered":return ga.msg.box({icon:"information.png",text:"Question has already been answered in another session"}),delete ga.qr.openq[e],!0;case "timeout":return ga.msg.box({icon:"information.png",text:"The time for answering a question has expired"}),delete ga.qr.openq[e],!0;default:return ga.msg.box({icon:"toast.png",text:"Internal error, unknown message state"}),delete ga.qr.openq[e],
!0}else return ga.msg.box({icon:"warning.png",text:a._question.requiredmsg?a._question.requiredmsg:"Not all required fields have been entered."}),!0;if(c){var g=!1;$("#"+e+" *").filter(":input").each(function(){if(this.required){var a=!0;this.dataset&&"rfile_val"==this.dataset.type&&this.value.length&&(a=!1);if(a)switch(this.type){case "text":case "number":case "select-one":this.value.length||(g=!0);break;case "select-multiple":($("#"+this.id).val()||[]).length()||(g=!0);break;case "file":0==this.files.length&&
(g=!0)}}});if(g)return ga.msg.box({icon:"warning.png",text:a._question.requiredmsg?a._question.requiredmsg:"Not all required fields have been entered."}),!1}delete ga.qr.openq[e];var f={};f._uuid=a._uuid;f._msgid=parseFloat(a._msgid);f._response={};f._response.button=b;a._question&&a._question.id&&(f._response.id=a._question.id);var k=!1;$("#"+e+" *").filter(":input").each(function(){this.dataset&&"rfile_val"==this.dataset.type&&this.value.length&&(k=!0);switch(this.type){case "text":case "number":case "select-one":f._response[this.id]=
this.value;break;case "select-multiple":f._response[this.id]=$("#"+this.id).val()||[];break;case "checkbox":this.checked&&(f._response[this.id]=!0);break;case "file":0==this.files.length?this.remove():k=!0}});k?ga.qr.postfiles(e,f):ga.qr.post(f);return!0};ga.qr.answered=function(a,b){b._uuid&&b._msgid&&(a=b._uuid+"-"+b._msgid,ga.qr.openq[a]&&(ga.qr.openq[a]="answered"))};ga.qr.timeout=function(a,b){b._uuid&&b._msgid&&(a=b._uuid+"-"+b._msgid,ga.qr.openq[a]&&(ga.qr.openq[a]="timeout"))};
ga.qr.rerror=function(a,b){var c={};c._uuid=a._uuid;c._msgid=parseFloat(a._msgid);c._response={};c._response.error=b;a._question&&a._question.id&&(c._response.id=a._question.id);ga.qr.post(c);ga.msg.box({icon:"toast.png",text:b})};
ga.qr.post=function(a){$.ajax({url:ga.qr.url,data:{_window:window.name,_data:a},dataType:"json",method:"POST"}).success(function(a){a.error&&a.error.length&&ga.msg.box({icon:"toast.png",text:"ajax data error: "+a.error,buttons:[{id:"ok",label:"OK"}]})}).error(function(a){console.log("ajax error");console.dir(a);ga.msg.box({icon:"toast.png",text:"ajax error: "+a.statusText,buttons:[{id:"ok",label:"OK"}]})})};
ga.qr.postfiles=function(a,b){var c="#"+a+"_progress";ga.msg.box({icon:"information.png",noclose:1,text:'Uploading files:<progress id="'+a+'_progress"></progress>'});var e=new FormData($("#"+a)[0]);e.append("_window",window.name);e.append("_logon",$("#_state").data("_logon"));e.append("_uuid",b._uuid);$.ajax({dataType:"json",cache:!1,type:"POST",url:"ajax/sys/uploader.php",data:e,xhr:function(){var a=$.ajaxSettings.xhr();a.upload&&a.upload.addEventListener("progress",function(a){a.lengthComputable&&
$(c).attr({value:a.loaded,max:a.total})},!1);return a},contentType:!1,processData:!1}).success(function(c){ga.msg.close(3);if(c.error&&c.error.length)delete ga.qr.openq[a],ga.qr.rerror(b,"ajax data error: "+c.error);else{if(c.files)for(var e in c.files)c.files.hasOwnProperty(e)&&(b[e]=c.files[e]);ga.qr.post(b)}}).error(function(c){ga.msg.close(3);console.log("ajax error");console.dir(c);delete ga.qr.openq[a];ga.qr.rerror(b,"ajax error: "+c.statusText)})};ga.msg={};
ga.msg.box=function(a,b,c){c=c||3;if(!b&&$(".modalDialog"+c).hasClass("modalDialog"+c+"_on")){b=$("#_state").data("__msgs");if(!b||b&&"[object Array]"!=Object.prototype.toString.call(b))b=[];b.push(a);$("#_state").data("__msgs",b)}else{a.icon?$("#configbody"+c).html("<table style='width:95%;vertical-align:middle'><tr><td style='width:10%'><img src='pngs/"+a.icon+"' width=40px></td><td style='text-align:center'>"+a.text+"</td></tr></table>"):$("#configbody"+c).html("<center>"+a.text+"</center>");a.noclose?
$("#closeModal"+c).hasClass("close"+c)&&$("#closeModal"+c).removeClass("close"+c).empty():4>c&&!$("#closeModal"+c).hasClass("close"+c)&&$("#closeModal"+c).addClass("close"+c).html("X");if(a.buttons){tmp="<center><table><tr>";for(i=0;i<a.buttons.length;i++)tmp=a.buttons[i].help?tmp+'<td><button id="_mbb_'+a.buttons[i].id+'" class="help_link">'+a.buttons[i].label+'</button><span class="help">'+a.buttons[i].help+"</span></td>":tmp+'<td><button id="_mbb_'+a.buttons[i].id+'">'+a.buttons[i].label+"</button></td>";
tmp+="</tr></table><center>";$("#configbody"+c).append(tmp);for(i=0;i<a.buttons.length;i++)if(a.buttons[i].cb)if(a.buttons[i].adata)switch(a.buttons[i].adata.length){case 2:if(a.closeif)$("#_mbb_"+a.buttons[i].id).off().on("click",a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1])&&ga.msg.close(c)});else $("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1]);ga.msg.close(c)});break;case 3:if(a.closeif)$("#_mbb_"+a.buttons[i].id).off().on("click",
a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1],a.data.adata[2])&&ga.msg.close(c)});else $("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1],a.data.adata[2]);ga.msg.close(c)});break;case 4:$("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1],a.data.adata[2],a.data.adata[3]);ga.msg.close(c)});break;case 5:$("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],
function(a){a.data.cb(a.data.adata[0],a.data.adata[1],a.data.adata[2],a.data.adata[3],a.data.adata[4]);ga.msg.close(c)});break;case 6:$("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],function(a){a.data.cb(a.data.adata[0],a.data.adata[1],a.data.adata[2],a.data.adata[3],a.data.adata[4],a.data.adata[5]);ga.msg.close(c)});break;default:console.warn("in ga.msg.box unsupported number of adata arguments "+a.buttons[i].adata.length)}else $("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],
function(a){a.data.cb(a.data.data);ga.msg.close(c)});else $("#_mbb_"+a.buttons[i].id).off().one("click",a.buttons[i],function(a){ga.msg.close(c)})}a.ptext&&$("#configbody"+c).append(a.ptext);a.eval&&eval(a.eval);ga.repeats.save();ga.hhelp.reset();$(".modalDialog"+c).addClass("modalDialog"+c+"_on")}};ga.msg.close1=function(){ga.repeats.restore();$(".modalDialog").removeClass("modalDialog_on");setTimeout(function(){$("#configbody").empty()},400);ga.usesplash&&setTimeout(function(){splashlogin()},500)};
ga.msg.close2=function(){ga.repeats.restore();$(".modalDialog2").removeClass("modalDialog2_on");$("#configbody2").empty();ga.usesplash&&setTimeout(function(){splashlogin()},500)};ga.msg.close3=function(){ga.repeats.restore();$(".modalDialog3").removeClass("modalDialog3_on");$("#configbody3").empty();var a=$("#_state").data("__msgs");if(a&&a.length){var b=a.shift();$("#_state").data("__msgs",a);ga.msg.box(b,1)}ga.usesplash&&setTimeout(function(){splashlogin()},500)};
ga.msg.close4=function(){ga.repeats.restore();$(".modalDialog4").removeClass("modalDialog4_on");$("#configbody4").empty();ga.frontpageurl&&!ga.apprun?ga.frontpage(ga.frontpageurl):(ga.apprun=0,ga.usesplash&&setTimeout(function(){splashlogin()},500))};ga.msg.close=function(a){switch(a){case 1:ga.msg.close1();break;case 2:ga.msg.close2();break;case 3:ga.msg.close3();break;case 4:ga.msg.close4();break;default:console_warn("ga.msg.close called with unknown modal number "+a)}};
ga.msg.clicks=function(){$("#closeModal").click(function(){ga.msg.close(1)});$("#closeModal2").click(function(){ga.msg.close(2)});$("#closeModal3").click(function(){ga.msg.close(3)});$("#closeModal4").click(function(){ga.msg.close(4)})};ga.ws={};ga.ws.subd=[];
ga.ws.set=function(){var a=$("#_state").data("_ws");if(a){var b=$("#_state").data("_wssession");b&&b.isOpen?console.log("ga.ws.set: connection is already open"):b=new ab.Session(a,function(){$(".wsstatus").css("color","green");ga.event("global","ws messaging","connection established");$("#_state").data("_wssession",b);ga.ws.sub("keepalive",ga.ws.alive,"keepalive")},function(){$(".wsstatus").css("color","red");if(0==gd.data("_unload"))return ga.ws.set();console.log("ws connection closed on unload of page")},
{skipSubprotocolCheck:!0,maxRetries:60,retryDelay:2E3})}else console.log("ga.ws.set: ws not defined")};ga.ws.alive=function(){};ga.ws.sub=function(a,b,c){c in ga.ws.subd&&ga.ws.unsub(ga.ws.subd[c],c);ga.ws.subd[c]=a;$("#_state").data("_ws")?(c=$("#_state").data("_wssession"))?c.subscribe(a,b):console.log("ga.ws.sub: connection is not open"):console.log("ga.ws.sub: ws not defined")};
ga.ws.unsub=function(a,b){b in ga.ws.subd&&(delete ga.ws.subd[b],$("#_state").data("_ws")?(b=$("#_state").data("_wssession"))?(b.unsubscribe(a),$("#_state").data("_wssub:"+a,null)):console.log("ga.ws.sub: connection is not open"):console.log("ga.ws.sub: ws not defined"))};ga.ws.generic=function(a,b){console.log("ga.ws.generic "+a+" : "+b.json)};ga.layout={};
ga.layout.process=function(a){if(a&&a.resource)if(ga.layout.module&&ga.layout.module.name){var b=ga.layout.module.name;ga.layout.fields.b_submit?ga.layout.fields.b_submit.dhtml=ga.layout.fields.b_submit.dhtml.replace(/<button id/,'<button class="ga-button-submit" id'):(ga.layout.fields.b_submit={},ga.layout.fields.b_submit.lhtml='<label class=""></label>',ga.layout.fields.b_submit.dhtml='<button id="'+b+'_b_submit_button" class="ga-button-submit"><span class="buttontext">Submit</span></button><div id="b_submit_buttonval"></div>');
ga.layout.fields.b_submit.eval='\n$( "#'+b+'_b_submit_button" ).click( function( e ) {\n    console.log("b_submit");\n   e.preventDefault();\n   e.returnValue = false;\n   $( "#'+b+'" ).find( ".toclear" ).remove();   \n   if ( '+b+'_timeout_handler != "unset" ) {\n       \n       clearTimeout( '+b+"_timeout_handler );\n       if ( "+b+"_timeout_handler_uuid ) {\n           ga.ws.unsub( "+b+'_timeout_handler_uuid, "'+b+'" );\n       }\n       '+b+'_timeout_handler = "unset";\n   }\n   ga.value.resetDefaultValues( "'+
b+'_output", true );\n';ga.layout.fields.b_submit.eval=a&&a.captcha?ga.layout.fields.b_submit.eval+("\n   ga.captcha( do_"+b+"_submit, $(this) );\n   return false;\n"):ga.layout.fields.b_submit.eval+('\n   return ga.xsede.select( "'+a.resource+'", do_'+b+"_submit, $(this) );\n");ga.layout.fields.b_submit.eval+="\n});\n";ga.layout.fields.b_reset?ga.layout.fields.b_reset.dhtml=ga.layout.fields.b_reset.dhtml.replace(/<button id/,'<button class="ga-button-reset" id'):(ga.layout.fields.b_reset={},ga.layout.fields.b_reset.lhtml=
'<label class=""></label>',ga.layout.fields.b_reset.lhtml+="",ga.layout.fields.b_reset.dhtml='<button id="'+b+'_b_reset_button" class="ga-button-reset"><span class="buttontext">Reset</span></button><div id="b_reset_buttonval"></div>',ga.layout.fields.b_reset.dhtml+="");ga.layout.fields.b_reset.eval='\n$("#'+b+'_b_reset_button" ).click(function(){\n    console.log("b_reset");\n    return '+b+"_reset();\n});";ga.layout.fields[b+"_progress"]||(ga.layout.fields[b+"_progress"]={},ga.layout.fields[b+"_progress"].lhtml=
"",ga.layout.fields[b+"_progress"].dhtml='<span id="'+b+'_progress"></span>',ga.layout.fields[b+"_progress"].eval="");ga.layout.fields[b+"_output_airavata"]||(ga.layout.fields[b+"_output_airavata"]={},ga.layout.fields[b+"_output_airavata"].lhtml="",ga.layout.fields[b+"_output_airavata"].dhtml='<span id="'+b+'_output_airavata"></span>',ga.layout.fields[b+"_output_airavata"].eval="");ga.layout.fields[b+"_output_msgs"]||(ga.layout.fields[b+"_output_msgs"]={},ga.layout.fields[b+"_output_msgs"].lhtml=
"",ga.layout.fields[b+"_output_msgs"].dhtml='<div id="'+b+'_output_msgs" class="warning" type="msgs"></div>',ga.layout.fields[b+"_output_msgs"].eval="");ga.layout.fields[b+"_output_textarea"]||(ga.layout.fields[b+"_output_textarea"]={},ga.layout.fields[b+"_output_textarea"].lhtml="",ga.layout.fields[b+"_output_textarea"].dhtml='<textarea readonly hidden id="'+b+'_output_textarea"></textarea>',ga.layout.fields[b+"_output_textarea"].eval="");ga.layout.panel.panels?ga.layout.setup():console.error("error JSON contains no panels")}else console.error("ga.layout.process() required ga.layout.module.name set");
else console.error("ga.layout.process() required defaults object argument not specified")};
ga.layout.setup=function(){ga.layout.children={};ga.layout.panelpos={};for(var a=0;a<ga.layout.panel.panels.length;++a){var b=Object.keys(ga.layout.panel.panels[a])[0],c=ga.layout.panel.panels[a][b].parent;ga.layout.panelpos[b]=a;c&&(ga.layout.children[c]=ga.layout.children[c]||[],ga.layout.children[c].push(b))}ga.layout.panelfields={};for(a=0;a<ga.layout.panel.fields.length;++a)b=ga.layout.panel.fields[a].layout.parent,ga.layout.panelfields[b]=ga.layout.panelfields[b]||[],ga.layout.panelfields[b].push(ga.layout.panel.fields[a])};
ga.layout.html=function(){ga.layout.buttonsused=ga.layout.fields.b_submit||ga.layout.fields.b_reset;return ga.layout.thishtml("root")};
ga.layout.thishtml=function(a){var b="display:grid";ga.layout.panel.panels[ga.layout.panelpos[a]][a].gtr&&(b+=";grid-template-rows:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].gtr);ga.layout.panel.panels[ga.layout.panelpos[a]][a].gtc&&(b+=";grid-template-columns:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].gtc);ga.layout.panel.panels[ga.layout.panelpos[a]][a].gr&&(b+=";grid-row:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].gr);ga.layout.panel.panels[ga.layout.panelpos[a]][a].gc&&
(b+=";grid-column:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].gc);ga.layout.panel.panels[ga.layout.panelpos[a]][a].gap&&(b+=";grid-gap:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].gap);ga.layout.panel.panels[ga.layout.panelpos[a]][a].align&&(b+=";text-align:"+ga.layout.panel.panels[ga.layout.panelpos[a]][a].align);b="<div id=ga-panel-"+a+' style="'+b+'">';if(ga.layout.children[a])for(var c=0;c<ga.layout.children[a].length;++c)b+=ga.layout.thishtml(ga.layout.children[a][c]);if(ga.layout.panelfields[a])for(b+=
"\n",c=0;c<ga.layout.panelfields[a].length;++c){var e="",g="",f="",k=ga.layout.panelfields[a][c].id;ga.layout.panelfields[a][c].role&&(ga.layout.buttonsused||"output"!=ga.layout.panelfields[a][c].role||(b+=ga.layout.buttons()));ga.layout.panelfields[a][c].type&&(f+="ga-type-"+ga.layout.panelfields[a][c].type+" ");ga.layout.panelfields[a][c].lgr&&(e+="grid-row:"+ga.layout.panelfields[a][c].lgr+";");ga.layout.panelfields[a][c].lgc&&(e+="grid-column:"+ga.layout.panelfields[a][c].lgc+";");ga.layout.panelfields[a][c].layout.align&&
(e+="text-align:"+ga.layout.panelfields[a][c].layout.align+";");ga.layout.panelfields[a][c].dgr&&(g+="grid-row:"+ga.layout.panelfields[a][c].dgr+";");ga.layout.panelfields[a][c].dgc&&(g+="grid-column:"+ga.layout.panelfields[a][c].dgc+";");ga.layout.panelfields[a][c].layout.align&&(g+="text-align:"+ga.layout.panelfields[a][c].layout.align+";");ga.layout.fields[k].lhtml&&ga.layout.fields[k].lhtml.length&&(b+="<div id=ga-label-"+k+' style="'+e+'" class="'+f+'">',b+=ga.layout.fields[k].lhtml,b+="</div>\n");
ga.layout.fields[k].dhtml&&(b+="<div id=ga-data-"+k+' style="'+g+'" class="'+f+'">',b+=ga.layout.fields[k].dhtml,b+="</div>\n")}return b+"</div>\n"};ga.layout.eval=function(){for(var a="",b=0;b<ga.layout.panel.fields.length;++b){var c=ga.layout.panel.fields[b].id;ga.layout.fields[c].eval&&(a+=ga.layout.fields[c].eval)}return a};
ga.layout.buttons=function(){var a="";if(!ga.layout.buttonsused)for(var b in ga.layout.buttonhtml)a+="<div id=ga-button-"+b+' class="ga-button">'+ga.layout.buttonhtml[b]+"</div>\n";ga.layout.buttonsused=1;return a};
